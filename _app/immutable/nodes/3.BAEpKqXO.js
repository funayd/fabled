import{h as qe,p as Je,i as ma,a as ua,j as fa,T as pa,D as ea,k as ga,P as Se,F as we,B as Ve,l as ze,m as je,n as Ce,o as ce,q as ve,r as ae,t as le,u as De,v as xe,w as ha,x as ka,y as ya,z as ba,A as wa,C as pe,E as Ca,R as xa,c as Ze,b as aa,G as Pa,H as be,I as Sa,J as Ta,K as Ea}from"../chunks/components.svelte.DBFzEy6i.js";import{g as Pe,b as ta}from"../chunks/entry.O5whUwEc.js";import{r as Ma,C as Me}from"../chunks/Control.BfUg7Sne.js";import{i as te,a as s,b as U,t as _,d as Le,e as N,s as Ye,k as ra,n as na,j as Ae,c as ie,h as Ia}from"../chunks/disclose-version.BzwIO6uw.js";import{h as Qe,a as za,av as ja,aw as Da,ax as Oa,b as qa,p as Aa,c as Fa,d as La,U as Na,f as ge,u as sa,k as Ra,g as j,j as d,r as o,s as l,q as e,t as T,i as he,w as fe,F as w,ab as X,$ as Ka,ay as Va}from"../chunks/utils.CpL9zOOg.js";import{p as Te,a as p,b as Fe,o as oa,d as Wa,c as Xe}from"../chunks/index-client._308MsMe.js";import{M as Ne,s as Oe,c as Ie,o as We}from"../chunks/squish.BdGhWTUV.js";import{c as la}from"../chunks/svelte-component.Dd7O4D2z.js";function $e(k,a,t){Qe&&za();var v=k,m=Na,g,C=ja()?Da:Oa;qa(()=>{C(m,m=a())&&(g&&Aa(g),g=Fa(()=>t(v)))}),Qe&&(v=La)}const Ya=!1;async function Ba({params:k}){const a=k.id,t=k.type==="skill";let v;if(t){for(const m of Pe(qe.skills))if(m.name==a){v=m;break}if(v){if(!v.loaded){let m;if(v.location==="local")m=Je(localStorage.getItem(`sapi.skill.${v.name}`)||"");else{const g=await ma.getSkillYaml(v.name);m=Je(g)}m&&Object.keys(m).length>0&&await v.load(Object.values(m)[0]),v.postLoad()}return ua.set(v),fa.set(pa.SKILLS),{data:v}}}Ma(302,`${ta}/${k.type}/${k.id}/edit`)}const Ht=Object.freeze(Object.defineProperty({__proto__:null,load:Ba,ssr:Ya},Symbol.toStringTag,{value:"Module"}));var Ua=_('<div class="modal-desc svelte-13h7ryw"><!></div>'),Ga=_("<!> <!>",1),Ha=_('<h2 class="svelte-13h7ryw"><span class="svelte-13h7ryw"> </span></h2> <!> <hr> <div class="component-entry svelte-13h7ryw"><!> <!> <!> <!></div>',1);function Ja(k,a){ge(a,!0);let t=Te(a,"data",15,void 0);sa(()=>{var v;(v=t())==null||v.data.forEach(m=>{m instanceof ea&&m.init()})}),Ra(()=>{var v,m;(v=t())!=null&&v.changed()&&((m=a.onsave)==null||m.call(a))}),Ne(k,{get onclose(){return a.onclose},width:"70%",children:(v,m)=>{var g=te(),C=j(g);p(C,t,r=>{var D=Ha(),M=j(D),O=d(M),q=d(O,!0);o(O),o(M);var F=l(M,2);p(F,()=>t().description,E=>{var u=Ua(),c=d(u);ga(c,()=>t().description),o(u),s(E,u)});var x=l(F,4),h=d(x);Se(h,{label:"Comment",tooltip:"[comment] A comment that will be displayed in the skill editor",get value(){return t().comment},set value(E){t(t().comment=E,!0)}});var I=l(h,2);p(I,()=>t()instanceof we&&t().name!=="Cast"&&t().name!=="Initialize"&&t().name!=="Cleanup",E=>{var u=Ga(),c=j(u);Ve(c,{name:"Mana",tooltip:"[mana] Whether this trigger requires the mana cost to activate",get data(){return t().mana},set data(y){t(t().mana=y,!0)}});var A=l(c,2);Ve(A,{name:"Cooldown",tooltip:"[cooldown] Whether this trigger requires to be off cooldown to activate",get data(){return t().cooldown},set data(y){t(t().cooldown=y,!0)}}),s(E,u)},E=>{var u=te(),c=j(u);p(c,()=>t()instanceof ze||t()instanceof je||t()instanceof Ce,A=>{Se(A,{label:"Icon Key",get value(){return t().iconKey},set value(y){t(t().iconKey=y,!0)},tooltip:'[icon-key] The key used by the component in the Icon Lore. If this is set to "example" and has a value name of "value", it can be referenced using the string "{attr:example.value}"'})},null,!0),s(E,u)});var V=l(I,2);p(V,()=>t()instanceof Ce,E=>{Ve(E,{name:"Counts as Cast",tooltip:'[counts] Whether this mechanic running treats the skill as "casted" and will consume mana and start the cooldown. Set to false if it is a mechanic applled when the skill fails such as cleanup or an error message',get data(){return t().countsAsCast},set data(u){t(t().countsAsCast=u,!0)}})});var L=l(V,2);ce(L,17,()=>t().data,ve,(E,u)=>{var c=te(),A=j(c);p(A,()=>e(u).meetsRequirements(t()),y=>{var S=te(),b=j(S),W=fe(()=>`${(e(u).key?"["+e(u).key+"] ":"")??""}${e(u).tooltip??""}`);la(b,()=>e(u).component,(H,J)=>{J(H,{get data(){return e(u).data},set data(K){e(u).data=K},get name(){return e(u).name},get tooltip(){return e(W)},get multiple(){return e(u).multiple},get onsave(){return a.onsave}})}),s(y,S)}),s(E,c)}),o(x),T(()=>{ae(M,"deprecated",t().isDeprecated),U(q,t().name)}),s(r,D)}),s(v,g)},$$slots:{default:!0}}),he()}var Za=(k,a)=>w(a,!e(a)),Qa=(k,a,t)=>a.addComponent(e(t).component),Xa=_('<div class="comp-select svelte-1kmselj"> </div>'),$a=_('<div class="component-section svelte-1kmselj"></div>'),et=_('<div class="comp-subsection svelte-1kmselj"><h4 class="comp-subsection-header svelte-1kmselj"> <span class="icon material-symbols-rounded svelte-1kmselj">expand_more</span></h4> <!></div>');function ia(k,a){ge(a,!0);let t=Te(a,"sectionName",3,""),v=Te(a,"components",19,()=>[]),m=X(!0);var g=et(),C=d(g);C.__click=[Za,m];var r=d(C),D=l(r);o(C);var M=l(C,2);p(M,()=>e(m),O=>{var q=$a();ce(q,21,v,ve,(F,x)=>{var h=Xa();h.__click=[Qa,a,x];const I=fe(()=>De.includes(e(x).component));T(()=>ae(h,"deprecated",e(I)));var V=d(h,!0);o(h),T(()=>U(V,e(x).name)),N("keypress",h,L=>{L.key==="Enter"&&a.addComponent(e(x).component)}),s(F,h)}),o(q),le(3,q,()=>Oe,()=>({duration:200})),s(O,q)}),o(g),T(()=>{U(r,`${t()??""} `),ae(D,"expanded",e(m))}),s(k,g),he()}Le(["click"]);var at=(k,a)=>w(a,!e(a)),tt=(k,a,t)=>a(e(t).component),rt=_("<s> </s>"),nt=_('<div class="comp-select"><!></div>'),st=_('<div class="component-section svelte-117z55l"></div>'),ot=_('<hr> <div class="comp-modal-header svelte-117z55l"><h3 class="svelte-117z55l">Targets <span class="icon material-symbols-rounded svelte-117z55l">expand_more</span></h3></div> <!>',1),lt=(k,a)=>w(a,!e(a)),it=(k,a,t)=>a(e(t).component),dt=_("<s> </s>"),ct=_('<div class="comp-select"><!></div>'),vt=_('<div class="component-section svelte-117z55l"></div>'),_t=_('<hr> <div class="comp-modal-header svelte-117z55l"><h3 class="svelte-117z55l">Conditions <span class="icon material-symbols-rounded svelte-117z55l">expand_more</span></h3></div> <!>',1),mt=(k,a)=>w(a,!e(a)),ut=_('<div class="component-section svelte-117z55l"></div>'),ft=_('<hr> <div class="comp-modal-header svelte-117z55l"><h3 class="svelte-117z55l">Mechanics <span class="icon material-symbols-rounded svelte-117z55l">expand_more</span></h3></div> <!>',1),pt=_('<div class="modal-header-wrapper"><div></div> <h2>Add a Component</h2> <div class="search-bar"><!></div></div> <!> <!> <!> <hr> <div class="cancel">Cancel</div>',1);function gt(k,a){ge(a,!0);const t=Ye(),v=()=>ie(xe,"$filterParams",t),m=()=>ie(ha,"$filteredTargets",t),g=()=>ie(ka,"$filteredConditions",t),C=()=>ie(ya,"$filteredMechanics",t),r=()=>ie(ba,"$mechanicSections",t);let D=X(!0),M=X(!0),O=X(!0);const q=F=>{var h;const x=F.new().defaultOpen();x.isDeprecated=De.includes(F),a.data.addComponent(x),xe.set(""),(h=a.onsave)==null||h.call(a),Ie()};Ne(k,{width:"70%",open:!0,onclose:Ie,children:(F,x)=>{var h=pt(),I=j(h),V=l(d(I),4),L=d(V);Se(L,{get value(){return ra(),v()},set value(y){na(xe,Fe(y))},placeholder:"Search...",autofocus:!0}),o(V),o(I);var E=l(I,2);p(E,()=>m().length>0,y=>{var S=ot(),b=l(j(S),2);b.__click=[at,D];var W=d(b),H=l(d(W));o(W),o(b);var J=l(b,2);p(J,()=>e(D),K=>{var z=st();ce(z,5,m,ve,(de,R)=>{var f=nt();f.__click=[tt,q,R];var _e=d(f);p(_e,()=>De.includes(e(R).component),Y=>{var B=rt(),ke=d(B,!0);o(B),T(()=>U(ke,e(R).name)),s(Y,B)},Y=>{var B=Ae();T(()=>U(B,e(R).name)),s(Y,B)}),o(f),N("keypress",f,Y=>{Y.key==="Enter"&&q(e(R).component)}),s(de,f)}),o(z),le(3,z,()=>Oe,()=>({duration:200})),s(K,z)}),T(()=>ae(H,"expanded",e(D))),N("keypress",b,K=>{K.key==="Enter"&&w(D,!e(D))}),s(y,S)});var u=l(E,2);p(u,()=>g().length>0,y=>{var S=_t(),b=l(j(S),2);b.__click=[lt,M];var W=d(b),H=l(d(W));o(W),o(b);var J=l(b,2);p(J,()=>e(M),K=>{var z=vt();ce(z,5,g,ve,(de,R)=>{var f=ct();f.__click=[it,q,R];var _e=d(f);p(_e,()=>De.includes(e(R).component),Y=>{var B=dt(),ke=d(B,!0);o(B),T(()=>U(ke,e(R).name)),s(Y,B)},Y=>{var B=Ae();T(()=>U(B,e(R).name)),s(Y,B)}),o(f),N("keypress",f,Y=>{Y.key==="Enter"&&q(e(R).component)}),s(de,f)}),o(z),le(3,z,()=>Oe,()=>({duration:200})),s(K,z)}),T(()=>ae(H,"expanded",e(M))),N("keypress",b,K=>{K.key==="Enter"&&w(M,!e(M))}),s(y,S)});var c=l(u,2);p(c,()=>C().length>0,y=>{var S=ft(),b=l(j(S),2);b.__click=[mt,O];var W=d(b),H=l(d(W));o(W),o(b);var J=l(b,2);p(J,()=>e(O),K=>{var z=ut();ce(z,5,()=>Object.keys(r()),ve,(de,R)=>{var f=te(),_e=j(f);p(_e,()=>r()[e(R)].length>0,Y=>{ia(Y,{get sectionName(){return e(R)},get components(){return r()[e(R)]},addComponent:q})}),s(de,f)}),o(z),le(3,z,()=>Oe,()=>({duration:200})),s(K,z)}),T(()=>ae(H,"expanded",e(O))),N("keypress",b,K=>{K.key==="Enter"&&w(O,!e(O))}),s(y,S)});var A=l(c,4);A.__click=function(...y){var S;(S=Ie)==null||S.apply(this,y)},N("keypress",A,y=>{y.key==="Enter"&&Ie()}),s(F,h)},$$slots:{default:!0}}),he()}Le(["click"]);var ht=_('<div class="modal-desc svelte-13h7ryw"> </div>'),kt=_('<h2 class="svelte-13h7ryw"><span class="svelte-13h7ryw"> </span></h2> <!> <hr> <div class="component-entry svelte-13h7ryw"><!> <!></div>',1);function yt(k,a){ge(a,!0);let t=Te(a,"data",7);sa(()=>{t()&&t().preview.forEach(v=>{v instanceof ea&&v.init()})}),Ne(k,{get onclose(){return a.onclose},width:"70%",children:(v,m)=>{var g=kt(),C=j(g),r=d(C),D=d(r);o(r),o(C);var M=l(C,2);p(M,()=>t().description,x=>{var h=ht(),I=d(h,!0);o(h),T(()=>U(I,t().description)),s(x,h)});var O=l(M,4),q=d(O);Se(q,{label:"Enable Preview",tooltip:"[enabled] Whether this component will show its preview while casting. Requires a compatible casting mode: Item, Bars (hover bar only), Action bar, Title, Subtitle or Chat",children:(x,h)=>{wa(x,{get data(){return t().enablePreview},set data(I){t().enablePreview=I}})},$$slots:{default:!0}});var F=l(q,2);p(F,()=>t().enablePreview,x=>{var h=te(),I=j(h);ce(I,17,()=>t().preview,ve,(V,L)=>{var E=te(),u=j(E);p(u,()=>e(L).meetsPreviewRequirements(t()),c=>{var A=te(),y=j(A),S=fe(()=>`${(e(L).key?"["+e(L).key+"] ":"")??""}${e(L).tooltip??""}`);la(y,()=>e(L).component,(b,W)=>{W(b,{get data(){return e(L).data},set data(H){e(L).data=H},get name(){return e(L).name},get tooltip(){return e(S)},get multiple(){return e(L).multiple},get onsave(){return a.onsave}})}),s(c,A)}),s(V,E)}),s(x,h)}),o(O),T(()=>{ae(C,"deprecated",t().isDeprecated),U(D,`${t().name??""} - Preview`)}),s(v,g)},$$slots:{default:!0}}),he()}var bt=_("<s> </s>"),wt=(k,a)=>{k.stopPropagation(),w(a,!e(a))},Ct=_('<span class="material-symbols-rounded svelte-1v0lr19">expand_more</span>'),xt=_('<span class="material-symbols-rounded svelte-1v0lr19">expand_less</span>'),Pt=_('<span class="color-sample svelte-1v0lr19"></span>'),St=_('<span class="summary-item svelte-1v0lr19"><span> </span> <!></span>'),Tt=_('<div class="summary svelte-1v0lr19"><!></div>'),Et=_('<div class="comment svelte-1v0lr19"> </div>'),Mt=_('<div class="filler svelte-1v0lr19" role="none"></div>'),It=_("<span><!></span>"),zt=_('<div class="child-wrapper"></div>'),jt=_('<div class="controls svelte-1v0lr19"><!> <!> <!> <!></div> <div class="children svelte-1v0lr19"><!></div>',1),Dt=_('<div class="wrapper svelte-1v0lr19"><div class="comp-body svelte-1v0lr19" draggable="true" role="treeitem" tabindex="0"><div class="name svelte-1v0lr19"><span class="svelte-1v0lr19"> </span> <!></div> <div class="corner svelte-1v0lr19" role="button" tabindex="0"></div> <!> <!> <!> <!></div></div>');function da(k,a){ge(a,!0);const t=Ye(),v=()=>ie(pe,"$draggingComponent",t),m=()=>ie(Pa,"$useSymbols",t),g=()=>ie(Ca,"$showSummaryItems",t),C=()=>ie(q,"$skills",t);let r=Te(a,"component",7),D=X(void 0),M=X(void 0),O=X(Fe([]));const q=qe.skills;let F=X(!1),x=X(!1),h=X(!1),I=X(!1),V=X(!1),L=!1,E;const u=n=>{n==null||n.stopPropagation(),We(Ja,r())},c=n=>{n.stopPropagation(),We(gt,r())},A=n=>{n.stopPropagation(),We(yt,r())};oa(()=>{E=r().components.subscribe(n=>w(O,Fe(n))),r()._defaultOpen&&(u(),r()._defaultOpen=!1)}),Wa(()=>{E&&E()});const y=(n=!1)=>{if(n){if(r()instanceof we)return"🚩";if(r()instanceof je)return"⚠";if(r()instanceof ze)return"🎯";if(r()instanceof Ce)return"🔧"}return r()instanceof we?"Trigger":r()instanceof je?"Condition":r()instanceof ze?"Target":r()instanceof Ce?"Mechanic":"???"},S=()=>r()instanceof we?"#0083ef":r()instanceof je?"#feac00":r()instanceof ze?"#04af38":r()instanceof Ce?"#ff3a3a":"orange",b=(n,{duration:i})=>({duration:i,css:P=>`transform: rotate(${180-Sa(P)*180}deg);`}),W=n=>{var P;if(n.stopPropagation(),n.preventDefault(),r()==Pe(pe)||(w(x,!0),r()instanceof we))return;const i=((P=e(D))==null?void 0:P.getBoundingClientRect())||{top:0,height:0};w(I,n.clientY<i.height/2+i.top),w(V,n.clientY>=i.height/2+i.top)},H=()=>{w(x,!1),w(I,!1),w(V,!1)},J=n=>{var i,P;n.stopPropagation(),(!n.relatedTarget||!((i=e(D))!=null&&i.contains(n.relatedTarget))||(P=e(M))!=null&&P.contains(n.relatedTarget))&&H()},K=n=>{var P;n.stopPropagation();let i=Pe(pe);i&&((P=a.onaddskill)==null||P.call(a,{comp:i,relativeTo:r(),above:e(I)})),H()},z=n=>{var ee;let{comp:i,relativeTo:P,above:$}=n,G=e(O).indexOf(P);a.skill.removeComponent(i),r().addComponent(i,G+($?0:1)),(ee=a.onsave)==null||ee.call(a)},de=n=>{var $;n.stopPropagation();const i={};i[`${r().name}-copy`]=r().toYamlObj();const P=xa.deserializeComponents(i);r().parent?P.forEach(G=>{var ee;return(ee=r().parent)==null?void 0:ee.addComponent(G)}):(P.forEach(G=>a.skill.addComponent(G)),($=a.onupdate)==null||$.call(a))};var R=Dt(),f=d(R);f.__click=u;const _e=fe(S);var Y=d(f),B=d(Y),ke=d(B,!0);T(()=>U(ke,y(m()))),o(B);var Be=l(B),ca=l(Be);p(ca,()=>r().isDeprecated,n=>{var i=bt(),P=d(i,!0);o(i),T(()=>U(P,r().name)),s(n,i)},n=>{var i=Ae();T(()=>U(i,r().name)),s(n,i)}),o(Y);var Re=l(Y,2);Re.__click=[wt,F];var Ue=l(Re,2);p(Ue,()=>e(F),n=>{var i=Ct();le(1,i,()=>b,()=>({duration:400})),s(n,i)},n=>{var i=xt();le(1,i,()=>b,()=>({duration:400})),s(n,i)});var Ge=l(Ue,2);p(Ge,()=>g()&&r().summaryItems&&r().summaryItems.length>0,n=>{var i=Tt(),P=d(i);$e(P,C,$=>{var G=te(),ee=j(G);ce(ee,17,()=>r().summaryItems,ve,(Ke,re)=>{var Ee=te(),ne=j(Ee);p(ne,()=>r().getValue(e(re)),Z=>{var se=St(),me=d(se),Q=d(me);o(me);var oe=l(me,2);p(oe,()=>e(re).includes("color")&&!r().getValue(e(re)).includes(",")&&!r().getValue(e(re)).includes("_"),ue=>{var ye=Pt();const _a=fe(()=>r().getValue(e(re)).toLowerCase());T(()=>Ze(ye,"background-color",e(_a))),s(ue,ye)},ue=>{var ye=Ae();T(()=>U(ye,r().getValue(e(re)))),s(ue,ye)}),o(se),T(()=>U(Q,`${e(re)??""}:`)),s(Z,se)}),s(Ke,Ee)}),s($,G)}),o(i),s(n,i)});var He=l(Ge,2);$e(He,C,n=>{var i=te(),P=j(i);p(P,()=>r().comment||L,$=>{var G=Et(),ee=d(G,!0);o(G),T(()=>U(ee,r().comment)),s($,G)}),s(n,i)});var va=l(He,2);p(va,()=>!e(F),n=>{var i=jt(),P=j(i),$=d(P);p($,()=>r().isParent,ne=>{var Z=fe(S);Me(ne,{title:"Add Component",icon:"add",get color(){return e(Z)},onclick:c})});var G=l($,2);p(G,()=>r().preview&&r().preview.length>0,ne=>{Me(ne,{title:"Preview Settings",icon:"visibility",color:"gray",onclick:A})});var ee=l(G,2);Me(ee,{title:"Clone",icon:"content_copy",color:"white",onclick:de});var Ke=l(ee,2);Me(Ke,{title:"Delete",icon:"delete",color:"red",onclick:ne=>{var Z;ne.stopPropagation(),a.skill.removeComponent(r()),(Z=a.onupdate)==null||Z.call(a)}}),o(P);var re=l(P,2),Ee=d(re);p(Ee,()=>e(O).length===0,ne=>{var Z=te(),se=j(Z);p(se,()=>r().isParent&&(e(x)||e(h)),me=>{var Q=Mt();T(()=>ae(Q,"overChildren",e(h))),N("dragenter",Q,oe=>{oe.stopPropagation(),w(h,!0),w(x,!1)}),N("dragover",Q,oe=>{oe.stopPropagation(),oe.preventDefault()}),N("dragleave",Q,J),N("drop",Q,oe=>{oe.stopPropagation(),oe.preventDefault(),w(h,!1);let ue=Pe(pe);ue&&(a.skill.removeComponent(ue),r().addComponent(ue))}),le(3,Q,()=>be),s(me,Q)}),s(ne,Z)},ne=>{var Z=zt();ce(Z,21,()=>e(O),se=>se.id,(se,me)=>{var Q=It(),oe=d(Q);da(oe,{get skill(){return a.skill},get component(){return e(me)},get onupdate(){return a.onupdate},get onsave(){return a.onsave},onaddskill:z}),o(Q),le(3,Q,()=>be),s(se,Q)}),o(Z),Xe(Z,se=>w(M,se),()=>e(M)),s(ne,Z)}),o(re),le(3,P,()=>be),le(3,re,()=>be),s(n,i)}),o(f),Xe(f,n=>w(D,n),()=>e(D)),o(R),T(()=>{aa(f,"aria-selected",v()===r()),ae(f,"bottom",e(V)),ae(f,"dragging",v()===r()),ae(f,"over",e(x)),ae(f,"top",e(I)),Ze(f,"--comp-color",e(_e)),U(Be,`${(m()?" ":": ")??""} `)}),N("dragend",f,()=>pe.set(void 0)),N("dragleave",f,J),N("dragover",f,W),N("dragstart",f,n=>{n.stopPropagation(),pe.set(r())}),N("drop",f,K),N("keypress",f,n=>{n.key==="Enter"&&u(n)}),N("keypress",Re,n=>{n.key==="Enter"&&(n.stopPropagation(),w(F,!e(F)))}),le(2,f,()=>be),s(k,R),he()}Le(["click"]);var Ot=(k,a)=>w(a,!0),qt=_('<div class="widget svelte-178l6os"><!></div>'),At=_("<div>No triggers added yet.</div>"),Ft=(k,a)=>w(a,!1),Lt=_('<div class="modal-header-wrapper"><div></div> <h2 class="modal-header svelte-178l6os">Select New Trigger</h2> <div class="search-bar"><!></div></div> <hr> <div class="component-section svelte-178l6os"></div> <hr> <div class="cancel" tabindex="0" role="button">Cancel</div>',1),Nt=_('<div class="header svelte-178l6os"><h2 class="svelte-178l6os"> <a class="material-symbols-rounded edit-skill chip svelte-178l6os" title="Edit">edit</a> <span class="add-trigger chip svelte-178l6os" role="button" tabindex="0" title="Add Trigger"><span class="material-symbols-rounded">new_label</span></span></h2> <hr></div> <div class="container svelte-178l6os"><!> <!></div> <!>',1);function Jt(k,a){ge(a,!0);const t=Ye(),v=()=>ie(xe,"$filterParams",t),m=()=>ie(Ea,"$triggerSections",t);let g=fe(()=>{var c;return(c=a.data)==null?void 0:c.data}),C=X(!1);oa(()=>{let c;c=Ta.subscribe(A=>{A&&(c&&c(),D())})});const r=c=>{e(g).triggers.push(c.new().defaultOpen()),D(),setTimeout(()=>w(C,!1))},D=()=>{e(g).triggers=[...e(g).triggers],M()},M=()=>{qe.skills.set([...Pe(qe.skills)]),e(g).save()};var O=Nt();Ia(c=>{T(()=>Ka.title=`Fabled Dynamic Editor - ${e(g).name??""}`)});var q=j(O),F=d(q),x=d(F),h=l(x),I=l(h,2);I.__click=[Ot,C],o(F),Va(2),o(q);var V=l(q,2),L=d(V);ce(L,17,()=>e(g).triggers,c=>c.id,(c,A)=>{var y=qt(),S=d(y);da(S,{get skill(){return e(g)},get component(){return e(A)},onupdate:D,onsave:M}),o(y),s(c,y)});var E=l(L,2);p(E,()=>e(g).triggers.length===0,c=>{var A=At();s(c,A)}),o(V);var u=l(V,2);p(u,()=>e(C),c=>{Ne(c,{onclose:()=>w(C,!1),children:(A,y)=>{var S=Lt(),b=j(S),W=l(d(b),4),H=d(W);Se(H,{get value(){return ra(),v()},set value(z){na(xe,Fe(z))},placeholder:"Search...",autofocus:!0}),o(W),o(b);var J=l(b,4);ce(J,5,()=>Object.keys(m()),ve,(z,de)=>{ia(z,{get sectionName(){return e(de)},get components(){return m()[e(de)]},addComponent:r})}),o(J);var K=l(J,4);K.__click=[Ft,C],N("keypress",K,z=>z.key==="Enter"&&w(C,!1)),s(A,S)},$$slots:{default:!0}})}),T(()=>{U(x,`${e(g).name??""} `),aa(h,"href",`${ta??""}/skill/${e(g).name??""}/edit`)}),N("keypress",I,c=>c.key==="Enter"&&w(C,!0)),s(k,O),he()}Le(["click"]);export{Jt as component,Ht as universal};
