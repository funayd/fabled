import{h as qe,p as Je,i as ma,a as ua,j as fa,T as pa,D as ea,k as ga,P as Se,F as we,B as Ve,m as ze,n as De,o as Ce,q as ce,r as ve,u as ae,t as le,v as je,w as xe,x as ha,y as ka,z as ya,A as ba,C as wa,E as pe,G as Ca,R as xa,c as Ze,b as aa,H as Pa,I as be,J as Sa,K as Ta,L as Ea}from"../chunks/components.svelte.BEn2olz5.js";import{g as Pe,b as ta}from"../chunks/entry.CLwlVQLF.js";import{r as Ma,C as Me}from"../chunks/Control.NAkR8oKC.js";import{i as te,a as s,b as U,t as _,d as Fe,e as N,s as Ye,k as ra,l as na,j as Ae,c as ie,h as Ia}from"../chunks/disclose-version.D-DGFInC.js";import{h as Qe,i as za,j as Da,as as ja,p as Oa,k as qa,l as Aa,U as La,n as ge,u as sa,a as Fa,o as D,s as d,v as o,w as l,g as e,t as T,q as he,f as fe,D as w,a8 as X,$ as Na,at as Ra}from"../chunks/utils.C_JF9SDz.js";import{p as Te,a as p,b as Le,o as oa,d as Ka,c as Xe}from"../chunks/index-client.BkrZf2JV.js";import{M as Ne,s as Oe,c as Ie,o as We}from"../chunks/squish.CswaGx60.js";import{c as la}from"../chunks/svelte-component.Bi2Pn66e.js";function $e(k,a,t){Qe&&za();var v=k,m=La,g;Da(()=>{ja(m,m=a())&&(g&&Oa(g),g=qa(()=>t(v)))}),Qe&&(v=Aa)}const Va=!1;async function Wa({params:k}){const a=k.id,t=k.type==="skill";let v;if(t){for(const m of Pe(qe.skills))if(m.name==a){v=m;break}if(v){if(!v.loaded){let m;if(v.location==="local")m=Je(localStorage.getItem(`sapi.skill.${v.name}`)||"");else{const g=await ma.getSkillYaml(v.name);m=Je(g)}m&&Object.keys(m).length>0&&await v.load(Object.values(m)[0]),v.postLoad()}return ua.set(v),fa.set(pa.SKILLS),{data:v}}}Ma(302,`${ta}/${k.type}/${k.id}/edit`)}const Ut=Object.freeze(Object.defineProperty({__proto__:null,load:Wa,ssr:Va},Symbol.toStringTag,{value:"Module"}));var Ya=_('<div class="modal-desc svelte-13h7ryw"><!></div>'),Ba=_("<!> <!>",1),Ua=_('<h2 class="svelte-13h7ryw"><span class="svelte-13h7ryw"> </span></h2> <!> <hr> <div class="component-entry svelte-13h7ryw"><!> <!> <!> <!></div>',1);function Ga(k,a){ge(a,!0);let t=Te(a,"data",15,void 0);sa(()=>{var v;(v=t())==null||v.data.forEach(m=>{m instanceof ea&&m.init()})}),Fa(()=>{var v,m;(v=t())!=null&&v.changed()&&((m=a.onsave)==null||m.call(a))}),Ne(k,{get onclose(){return a.onclose},width:"70%",children:(v,m)=>{var g=te(),P=D(g);p(P,t,r=>{var j=Ua(),M=D(j),O=d(M),q=d(O,!0);o(O),o(M);var L=l(M,2);p(L,()=>t().description,E=>{var u=Ya(),c=d(u);ga(c,()=>t().description),o(u),s(E,u)});var C=l(L,4),h=d(C);Se(h,{label:"Comment",tooltip:"[comment] A comment that will be displayed in the skill editor",get value(){return t().comment},set value(E){t(t().comment=E,!0)}});var I=l(h,2);p(I,()=>t()instanceof we&&t().name!=="Cast"&&t().name!=="Initialize"&&t().name!=="Cleanup",E=>{var u=Ba(),c=D(u);Ve(c,{name:"Mana",tooltip:"[mana] Whether this trigger requires the mana cost to activate",get data(){return t().mana},set data(y){t(t().mana=y,!0)}});var A=l(c,2);Ve(A,{name:"Cooldown",tooltip:"[cooldown] Whether this trigger requires to be off cooldown to activate",get data(){return t().cooldown},set data(y){t(t().cooldown=y,!0)}}),s(E,u)},E=>{var u=te(),c=D(u);p(c,()=>t()instanceof ze||t()instanceof De||t()instanceof Ce,A=>{Se(A,{label:"Icon Key",get value(){return t().iconKey},set value(y){t(t().iconKey=y,!0)},tooltip:'[icon-key] The key used by the component in the Icon Lore. If this is set to "example" and has a value name of "value", it can be referenced using the string "{attr:example.value}"'})},null,!0),s(E,u)});var V=l(I,2);p(V,()=>t()instanceof Ce,E=>{Ve(E,{name:"Counts as Cast",tooltip:'[counts] Whether this mechanic running treats the skill as "casted" and will consume mana and start the cooldown. Set to false if it is a mechanic applled when the skill fails such as cleanup or an error message',get data(){return t().countsAsCast},set data(u){t(t().countsAsCast=u,!0)}})});var F=l(V,2);ce(F,17,()=>t().data,ve,(E,u)=>{var c=te(),A=D(c);p(A,()=>e(u).meetsRequirements(t()),y=>{var S=te(),b=D(S),W=fe(()=>`${(e(u).key?"["+e(u).key+"] ":"")??""}${e(u).tooltip??""}`);la(b,()=>e(u).component,(H,J)=>{J(H,{get data(){return e(u).data},set data(K){e(u).data=K},get name(){return e(u).name},get tooltip(){return e(W)},get multiple(){return e(u).multiple},get onsave(){return a.onsave}})}),s(y,S)}),s(E,c)}),o(C),T(()=>{ae(M,"deprecated",t().isDeprecated),U(q,t().name)}),s(r,j)}),s(v,g)},$$slots:{default:!0}}),he()}var Ha=(k,a)=>w(a,!e(a)),Ja=(k,a,t)=>a.addComponent(e(t).component),Za=_('<div class="comp-select svelte-1kmselj"> </div>'),Qa=_('<div class="component-section svelte-1kmselj"></div>'),Xa=_('<div class="comp-subsection svelte-1kmselj"><h4 class="comp-subsection-header svelte-1kmselj"> <span class="icon material-symbols-rounded svelte-1kmselj">expand_more</span></h4> <!></div>');function ia(k,a){ge(a,!0);let t=Te(a,"sectionName",3,""),v=Te(a,"components",19,()=>[]),m=X(!0);var g=Xa(),P=d(g);P.__click=[Ha,m];var r=d(P),j=l(r);o(P);var M=l(P,2);p(M,()=>e(m),O=>{var q=Qa();ce(q,21,v,ve,(L,C)=>{var h=Za();h.__click=[Ja,a,C];const I=fe(()=>je.includes(e(C).component));T(()=>ae(h,"deprecated",e(I)));var V=d(h,!0);o(h),T(()=>U(V,e(C).name)),N("keypress",h,F=>{F.key==="Enter"&&a.addComponent(e(C).component)}),s(L,h)}),o(q),le(3,q,()=>Oe,()=>({duration:200})),s(O,q)}),o(g),T(()=>{U(r,`${t()??""} `),ae(j,"expanded",e(m))}),s(k,g),he()}Fe(["click"]);var $a=(k,a)=>w(a,!e(a)),et=(k,a,t)=>a(e(t).component),at=_("<s> </s>"),tt=_('<div class="comp-select"><!></div>'),rt=_('<div class="component-section svelte-117z55l"></div>'),nt=_('<hr> <div class="comp-modal-header svelte-117z55l"><h3 class="svelte-117z55l">Targets <span class="icon material-symbols-rounded svelte-117z55l">expand_more</span></h3></div> <!>',1),st=(k,a)=>w(a,!e(a)),ot=(k,a,t)=>a(e(t).component),lt=_("<s> </s>"),it=_('<div class="comp-select"><!></div>'),dt=_('<div class="component-section svelte-117z55l"></div>'),ct=_('<hr> <div class="comp-modal-header svelte-117z55l"><h3 class="svelte-117z55l">Conditions <span class="icon material-symbols-rounded svelte-117z55l">expand_more</span></h3></div> <!>',1),vt=(k,a)=>w(a,!e(a)),_t=_('<div class="component-section svelte-117z55l"></div>'),mt=_('<hr> <div class="comp-modal-header svelte-117z55l"><h3 class="svelte-117z55l">Mechanics <span class="icon material-symbols-rounded svelte-117z55l">expand_more</span></h3></div> <!>',1),ut=_('<div class="modal-header-wrapper"><div></div> <h2>Add a Component</h2> <div class="search-bar"><!></div></div> <!> <!> <!> <hr> <div class="cancel">Cancel</div>',1);function ft(k,a){ge(a,!0);const t=Ye(),v=()=>ie(xe,"$filterParams",t),m=()=>ie(ha,"$filteredTargets",t),g=()=>ie(ka,"$filteredConditions",t),P=()=>ie(ya,"$filteredMechanics",t),r=()=>ie(ba,"$mechanicSections",t);let j=X(!0),M=X(!0),O=X(!0);const q=L=>{var h;const C=L.new().defaultOpen();C.isDeprecated=je.includes(L),a.data.addComponent(C),xe.set(""),(h=a.onsave)==null||h.call(a),Ie()};Ne(k,{width:"70%",open:!0,onclose:Ie,children:(L,C)=>{var h=ut(),I=D(h),V=l(d(I),4),F=d(V);Se(F,{get value(){return ra(),v()},set value(y){na(xe,Le(y))},placeholder:"Search...",autofocus:!0}),o(V),o(I);var E=l(I,2);p(E,()=>m().length>0,y=>{var S=nt(),b=l(D(S),2);b.__click=[$a,j];var W=d(b),H=l(d(W));o(W),o(b);var J=l(b,2);p(J,()=>e(j),K=>{var z=rt();ce(z,5,m,ve,(de,R)=>{var f=tt();f.__click=[et,q,R];var _e=d(f);p(_e,()=>je.includes(e(R).component),Y=>{var B=at(),ke=d(B,!0);o(B),T(()=>U(ke,e(R).name)),s(Y,B)},Y=>{var B=Ae();T(()=>U(B,e(R).name)),s(Y,B)}),o(f),N("keypress",f,Y=>{Y.key==="Enter"&&q(e(R).component)}),s(de,f)}),o(z),le(3,z,()=>Oe,()=>({duration:200})),s(K,z)}),T(()=>ae(H,"expanded",e(j))),N("keypress",b,K=>{K.key==="Enter"&&w(j,!e(j))}),s(y,S)});var u=l(E,2);p(u,()=>g().length>0,y=>{var S=ct(),b=l(D(S),2);b.__click=[st,M];var W=d(b),H=l(d(W));o(W),o(b);var J=l(b,2);p(J,()=>e(M),K=>{var z=dt();ce(z,5,g,ve,(de,R)=>{var f=it();f.__click=[ot,q,R];var _e=d(f);p(_e,()=>je.includes(e(R).component),Y=>{var B=lt(),ke=d(B,!0);o(B),T(()=>U(ke,e(R).name)),s(Y,B)},Y=>{var B=Ae();T(()=>U(B,e(R).name)),s(Y,B)}),o(f),N("keypress",f,Y=>{Y.key==="Enter"&&q(e(R).component)}),s(de,f)}),o(z),le(3,z,()=>Oe,()=>({duration:200})),s(K,z)}),T(()=>ae(H,"expanded",e(M))),N("keypress",b,K=>{K.key==="Enter"&&w(M,!e(M))}),s(y,S)});var c=l(u,2);p(c,()=>P().length>0,y=>{var S=mt(),b=l(D(S),2);b.__click=[vt,O];var W=d(b),H=l(d(W));o(W),o(b);var J=l(b,2);p(J,()=>e(O),K=>{var z=_t();ce(z,5,()=>Object.keys(r()),ve,(de,R)=>{var f=te(),_e=D(f);p(_e,()=>r()[e(R)].length>0,Y=>{ia(Y,{get sectionName(){return e(R)},get components(){return r()[e(R)]},addComponent:q})}),s(de,f)}),o(z),le(3,z,()=>Oe,()=>({duration:200})),s(K,z)}),T(()=>ae(H,"expanded",e(O))),N("keypress",b,K=>{K.key==="Enter"&&w(O,!e(O))}),s(y,S)});var A=l(c,4);A.__click=function(...y){var S;(S=Ie)==null||S.apply(this,y)},N("keypress",A,y=>{y.key==="Enter"&&Ie()}),s(L,h)},$$slots:{default:!0}}),he()}Fe(["click"]);var pt=_('<div class="modal-desc svelte-13h7ryw"> </div>'),gt=_('<h2 class="svelte-13h7ryw"><span class="svelte-13h7ryw"> </span></h2> <!> <hr> <div class="component-entry svelte-13h7ryw"><!> <!></div>',1);function ht(k,a){ge(a,!0);let t=Te(a,"data",7);sa(()=>{t()&&t().preview.forEach(v=>{v instanceof ea&&v.init()})}),Ne(k,{get onclose(){return a.onclose},width:"70%",children:(v,m)=>{var g=gt(),P=D(g),r=d(P),j=d(r);o(r),o(P);var M=l(P,2);p(M,()=>t().description,C=>{var h=pt(),I=d(h,!0);o(h),T(()=>U(I,t().description)),s(C,h)});var O=l(M,4),q=d(O);Se(q,{label:"Enable Preview",tooltip:"[enabled] Whether this component will show its preview while casting. Requires a compatible casting mode: Item, Bars (hover bar only), Action bar, Title, Subtitle or Chat",children:(C,h)=>{wa(C,{get data(){return t().enablePreview},set data(I){t().enablePreview=I}})},$$slots:{default:!0}});var L=l(q,2);p(L,()=>t().enablePreview,C=>{var h=te(),I=D(h);ce(I,17,()=>t().preview,ve,(V,F)=>{var E=te(),u=D(E);p(u,()=>e(F).meetsPreviewRequirements(t()),c=>{var A=te(),y=D(A),S=fe(()=>`${(e(F).key?"["+e(F).key+"] ":"")??""}${e(F).tooltip??""}`);la(y,()=>e(F).component,(b,W)=>{W(b,{get data(){return e(F).data},set data(H){e(F).data=H},get name(){return e(F).name},get tooltip(){return e(S)},get multiple(){return e(F).multiple},get onsave(){return a.onsave}})}),s(c,A)}),s(V,E)}),s(C,h)}),o(O),T(()=>{ae(P,"deprecated",t().isDeprecated),U(j,`${t().name??""} - Preview`)}),s(v,g)},$$slots:{default:!0}}),he()}var kt=_("<s> </s>"),yt=(k,a)=>{k.stopPropagation(),w(a,!e(a))},bt=_('<span class="material-symbols-rounded svelte-1v0lr19">expand_more</span>'),wt=_('<span class="material-symbols-rounded svelte-1v0lr19">expand_less</span>'),Ct=_('<span class="color-sample svelte-1v0lr19"></span>'),xt=_('<span class="summary-item svelte-1v0lr19"><span> </span> <!></span>'),Pt=_('<div class="summary svelte-1v0lr19"><!></div>'),St=_('<div class="comment svelte-1v0lr19"> </div>'),Tt=_('<div class="filler svelte-1v0lr19" role="none"></div>'),Et=_("<span><!></span>"),Mt=_('<div class="child-wrapper"></div>'),It=_('<div class="controls svelte-1v0lr19"><!> <!> <!> <!></div> <div class="children svelte-1v0lr19"><!></div>',1),zt=_('<div class="wrapper svelte-1v0lr19"><div class="comp-body svelte-1v0lr19" draggable="true" role="treeitem" tabindex="0"><div class="name svelte-1v0lr19"><span class="svelte-1v0lr19"> </span> <!></div> <div class="corner svelte-1v0lr19" role="button" tabindex="0"></div> <!> <!> <!> <!></div></div>');function da(k,a){ge(a,!0);const t=Ye(),v=()=>ie(pe,"$draggingComponent",t),m=()=>ie(Pa,"$useSymbols",t),g=()=>ie(Ca,"$showSummaryItems",t),P=()=>ie(q,"$skills",t);let r=Te(a,"component",7),j=X(void 0),M=X(void 0),O=X(Le([]));const q=qe.skills;let L=X(!1),C=X(!1),h=X(!1),I=X(!1),V=X(!1),F=!1,E;const u=n=>{n==null||n.stopPropagation(),We(Ga,r())},c=n=>{n.stopPropagation(),We(ft,r())},A=n=>{n.stopPropagation(),We(ht,r())};oa(()=>{E=r().components.subscribe(n=>w(O,Le(n))),r()._defaultOpen&&(u(),r()._defaultOpen=!1)}),Ka(()=>{E&&E()});const y=(n=!1)=>{if(n){if(r()instanceof we)return"🚩";if(r()instanceof De)return"⚠";if(r()instanceof ze)return"🎯";if(r()instanceof Ce)return"🔧"}return r()instanceof we?"Trigger":r()instanceof De?"Condition":r()instanceof ze?"Target":r()instanceof Ce?"Mechanic":"???"},S=()=>r()instanceof we?"#0083ef":r()instanceof De?"#feac00":r()instanceof ze?"#04af38":r()instanceof Ce?"#ff3a3a":"orange",b=(n,{duration:i})=>({duration:i,css:x=>`transform: rotate(${180-Sa(x)*180}deg);`}),W=n=>{var x;if(n.stopPropagation(),n.preventDefault(),r()==Pe(pe)||(w(C,!0),r()instanceof we))return;const i=((x=e(j))==null?void 0:x.getBoundingClientRect())||{top:0,height:0};w(I,n.clientY<i.height/2+i.top),w(V,n.clientY>=i.height/2+i.top)},H=()=>{w(C,!1),w(I,!1),w(V,!1)},J=n=>{var i,x;n.stopPropagation(),(!n.relatedTarget||!((i=e(j))!=null&&i.contains(n.relatedTarget))||(x=e(M))!=null&&x.contains(n.relatedTarget))&&H()},K=n=>{var x;n.stopPropagation();let i=Pe(pe);i&&((x=a.onaddskill)==null||x.call(a,{comp:i,relativeTo:r(),above:e(I)})),H()},z=n=>{var ee;let{comp:i,relativeTo:x,above:$}=n,G=e(O).indexOf(x);a.skill.removeComponent(i),r().addComponent(i,G+($?0:1)),(ee=a.onsave)==null||ee.call(a)},de=n=>{var $;n.stopPropagation();const i={};i[`${r().name}-copy`]=r().toYamlObj();const x=xa.deserializeComponents(i);r().parent?x.forEach(G=>{var ee;return(ee=r().parent)==null?void 0:ee.addComponent(G)}):(x.forEach(G=>a.skill.addComponent(G)),($=a.onupdate)==null||$.call(a))};var R=zt(),f=d(R);f.__click=u;const _e=fe(S);var Y=d(f),B=d(Y),ke=d(B,!0);T(()=>U(ke,y(m()))),o(B);var Be=l(B),ca=l(Be);p(ca,()=>r().isDeprecated,n=>{var i=kt(),x=d(i,!0);o(i),T(()=>U(x,r().name)),s(n,i)},n=>{var i=Ae();T(()=>U(i,r().name)),s(n,i)}),o(Y);var Re=l(Y,2);Re.__click=[yt,L];var Ue=l(Re,2);p(Ue,()=>e(L),n=>{var i=bt();le(1,i,()=>b,()=>({duration:400})),s(n,i)},n=>{var i=wt();le(1,i,()=>b,()=>({duration:400})),s(n,i)});var Ge=l(Ue,2);p(Ge,()=>g()&&r().summaryItems&&r().summaryItems.length>0,n=>{var i=Pt(),x=d(i);$e(x,P,$=>{var G=te(),ee=D(G);ce(ee,17,()=>r().summaryItems,ve,(Ke,re)=>{var Ee=te(),ne=D(Ee);p(ne,()=>r().getValue(e(re)),Z=>{var se=xt(),me=d(se),Q=d(me);o(me);var oe=l(me,2);p(oe,()=>e(re).includes("color")&&!r().getValue(e(re)).includes(",")&&!r().getValue(e(re)).includes("_"),ue=>{var ye=Ct();const _a=fe(()=>r().getValue(e(re)).toLowerCase());T(()=>Ze(ye,"background-color",e(_a))),s(ue,ye)},ue=>{var ye=Ae();T(()=>U(ye,r().getValue(e(re)))),s(ue,ye)}),o(se),T(()=>U(Q,`${e(re)??""}:`)),s(Z,se)}),s(Ke,Ee)}),s($,G)}),o(i),s(n,i)});var He=l(Ge,2);$e(He,P,n=>{var i=te(),x=D(i);p(x,()=>r().comment||F,$=>{var G=St(),ee=d(G,!0);o(G),T(()=>U(ee,r().comment)),s($,G)}),s(n,i)});var va=l(He,2);p(va,()=>!e(L),n=>{var i=It(),x=D(i),$=d(x);p($,()=>r().isParent,ne=>{var Z=fe(S);Me(ne,{title:"Add Component",icon:"add",get color(){return e(Z)},onclick:c})});var G=l($,2);p(G,()=>r().preview&&r().preview.length>0,ne=>{Me(ne,{title:"Preview Settings",icon:"visibility",color:"gray",onclick:A})});var ee=l(G,2);Me(ee,{title:"Clone",icon:"content_copy",color:"white",onclick:de});var Ke=l(ee,2);Me(Ke,{title:"Delete",icon:"delete",color:"red",onclick:ne=>{var Z;ne.stopPropagation(),a.skill.removeComponent(r()),(Z=a.onupdate)==null||Z.call(a)}}),o(x);var re=l(x,2),Ee=d(re);p(Ee,()=>e(O).length===0,ne=>{var Z=te(),se=D(Z);p(se,()=>r().isParent&&(e(C)||e(h)),me=>{var Q=Tt();T(()=>ae(Q,"overChildren",e(h))),N("dragenter",Q,oe=>{oe.stopPropagation(),w(h,!0),w(C,!1)}),N("dragover",Q,oe=>{oe.stopPropagation(),oe.preventDefault()}),N("dragleave",Q,J),N("drop",Q,oe=>{oe.stopPropagation(),oe.preventDefault(),w(h,!1);let ue=Pe(pe);ue&&(a.skill.removeComponent(ue),r().addComponent(ue))}),le(3,Q,()=>be),s(me,Q)}),s(ne,Z)},ne=>{var Z=Mt();ce(Z,21,()=>e(O),se=>se.id,(se,me)=>{var Q=Et(),oe=d(Q);da(oe,{get skill(){return a.skill},get component(){return e(me)},get onupdate(){return a.onupdate},get onsave(){return a.onsave},onaddskill:z}),o(Q),le(3,Q,()=>be),s(se,Q)}),o(Z),Xe(Z,se=>w(M,se),()=>e(M)),s(ne,Z)}),o(re),le(3,x,()=>be),le(3,re,()=>be),s(n,i)}),o(f),Xe(f,n=>w(j,n),()=>e(j)),o(R),T(()=>{aa(f,"aria-selected",v()===r()),ae(f,"bottom",e(V)),ae(f,"dragging",v()===r()),ae(f,"over",e(C)),ae(f,"top",e(I)),Ze(f,"--comp-color",e(_e)),U(Be,`${(m()?" ":": ")??""} `)}),N("dragend",f,()=>pe.set(void 0)),N("dragleave",f,J),N("dragover",f,W),N("dragstart",f,n=>{n.stopPropagation(),pe.set(r())}),N("drop",f,K),N("keypress",f,n=>{n.key==="Enter"&&u(n)}),N("keypress",Re,n=>{n.key==="Enter"&&(n.stopPropagation(),w(L,!e(L)))}),le(2,f,()=>be),s(k,R),he()}Fe(["click"]);var Dt=(k,a)=>w(a,!0),jt=_('<div class="widget svelte-178l6os"><!></div>'),Ot=_("<div>No triggers added yet.</div>"),qt=(k,a)=>w(a,!1),At=_('<div class="modal-header-wrapper"><div></div> <h2 class="modal-header svelte-178l6os">Select New Trigger</h2> <div class="search-bar"><!></div></div> <hr> <div class="component-section svelte-178l6os"></div> <hr> <div class="cancel" tabindex="0" role="button">Cancel</div>',1),Lt=_('<div class="header svelte-178l6os"><h2 class="svelte-178l6os"> <a class="material-symbols-rounded edit-skill chip svelte-178l6os" title="Edit">edit</a> <span class="add-trigger chip svelte-178l6os" role="button" tabindex="0" title="Add Trigger"><span class="material-symbols-rounded">new_label</span></span></h2> <hr></div> <div class="container svelte-178l6os"><!> <!></div> <!>',1);function Gt(k,a){ge(a,!0);const t=Ye(),v=()=>ie(xe,"$filterParams",t),m=()=>ie(Ea,"$triggerSections",t);let g=fe(()=>{var c;return(c=a.data)==null?void 0:c.data}),P=X(!1);oa(()=>{let c;c=Ta.subscribe(A=>{A&&(c&&c(),j())})});const r=c=>{e(g).triggers.push(c.new().defaultOpen()),j(),setTimeout(()=>w(P,!1))},j=()=>{e(g).triggers=[...e(g).triggers],M()},M=()=>{qe.skills.set([...Pe(qe.skills)]),e(g).save()};var O=Lt();Ia(c=>{T(()=>Na.title=`Fabled Dynamic Editor - ${e(g).name??""}`)});var q=D(O),L=d(q),C=d(L),h=l(C),I=l(h,2);I.__click=[Dt,P],o(L),Ra(2),o(q);var V=l(q,2),F=d(V);ce(F,17,()=>e(g).triggers,c=>c.id,(c,A)=>{var y=jt(),S=d(y);da(S,{get skill(){return e(g)},get component(){return e(A)},onupdate:j,onsave:M}),o(y),s(c,y)});var E=l(F,2);p(E,()=>e(g).triggers.length===0,c=>{var A=Ot();s(c,A)}),o(V);var u=l(V,2);p(u,()=>e(P),c=>{Ne(c,{onclose:()=>w(P,!1),children:(A,y)=>{var S=At(),b=D(S),W=l(d(b),4),H=d(W);Se(H,{get value(){return ra(),v()},set value(z){na(xe,Le(z))},placeholder:"Search...",autofocus:!0}),o(W),o(b);var J=l(b,4);ce(J,5,()=>Object.keys(m()),ve,(z,de)=>{ia(z,{get sectionName(){return e(de)},get components(){return m()[e(de)]},addComponent:r})}),o(J);var K=l(J,4);K.__click=[qt,P],N("keypress",K,z=>z.key==="Enter"&&w(P,!1)),s(A,S)},$$slots:{default:!0}})}),T(()=>{U(C,`${e(g).name??""} `),aa(h,"href",`${ta??""}/skill/${e(g).name??""}/edit`)}),N("keypress",I,c=>c.key==="Enter"&&w(P,!0)),s(k,O),he()}Fe(["click"]);export{Gt as component,Ut as universal};
