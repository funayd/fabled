import{L as Ge,M as Me,h as Fe,N as Re,p as Ie,i as Ce,a as st,j as xe,T as Ae,O as De,P as o,Q as lt,n as ge,o as Se,q as Xe,S as te,U as D,V as rt,W as Ke,X as ot,b as nt}from"../chunks/class-store.pbq76w2p.js";import{g as Le,b as it}from"../chunks/entry.j2XGvQNg.js";import{r as Ye,C as he}from"../chunks/Control.CaH10ks_.js";import{a as T,t as W,s as pe,e as ne,c as ke,h as ut}from"../chunks/disclose-version.B9aixzAF.js";import{o as K,q as z,z as s,g as m,w as Y,a3 as ie,y as w,v as Q,x as C,at as L,au as le,s as F,ay as j,k as A,ax as we,$ as ct}from"../chunks/runtime.LqzrUpiV.js";import{p as R,o as dt,f as vt,i as U}from"../chunks/index-client.no01Ekxd.js";import{i as G}from"../chunks/lifecycle.CXak-Nyl.js";import{M as Je,L as se,e as $t,b as mt,S as qe}from"../chunks/StringSelectOption.CnAO8PV-.js";import{s as ue,a as N,c as ae,b as Be,i as Ze}from"../chunks/store.BxMbIY2h.js";import{S as be,T as V,a as ht}from"../chunks/Toggle.C8JTk9bz.js";const pt=!1;async function bt({params:b}){const d=b.id,a=b.type==="skill";let l,t;switch(b.type){case"skill":for(const e of Le(Fe.skills))if(t||(t=e),e.name==d){l=e;break}break;case"attribute":for(const e of Le(Me.attributes))if(t||(t=e),e.name==d){l=e;break}break;default:for(const e of Le(Ge.classes))if(t||(t=e),e.name==d){l=e;break}break}if(l){let e=!1;if(!l.loaded){let i;if(l.location==="local")if(l instanceof Re){const n=localStorage.getItem("attribs")||"";n.split(`
`).length>2||n.charAt(0)=="{"?i=Ie(n):i={}}else e=!0,i=Ie(localStorage.getItem(`sapi.${a?"skill":"class"}.${l.name}`)||"");else{let n;b.type=="class"?n=await Ce.getClassYaml(l.name):b.type==="skill"?n=await Ce.getSkillYaml(l.name):n=await Ce.getAttributeYaml(),i=Ie(n)}i&&Object.keys(i).length>0&&(l instanceof Re?l.load(i[l.name]):l.load(Object.values(i)[0])),e&&a&&l.postLoad()}switch(e&&!a&&gt(l),st.set(l),b.type){case"skill":xe.set(Ae.SKILLS);break;case"attribute":xe.set(Ae.ATTRIBUTES);break;default:xe.set(Ae.CLASSES);break}return{data:l}}else t?Ye(302,`/${b.type}/${t.name}`):Ye(302,"/")}const gt=b=>{for(const d of Me.getAttributeNames())b.attributes.find(a=>a.name===d)||b.attributes.push(new De(d,0,0))},sa=Object.freeze(Object.defineProperty({__proto__:null,load:bt,ssr:pt},Symbol.toStringTag,{value:"Module"}));var ft=W("<!> <!> <!>",1);function Ne(b,d){K(d,!1);const a=ue(),l=()=>N(lt,"$activeType",a);let t=R(d,"icon",12);G();var e=ft(),i=z(e);o(i,{label:"Icon",get tooltip(){return`[icon] The item that represents the ${l()??""} in GUIs`},children:(c,k)=>{Je(c,{get selected(){return t().material},set selected(r){t(t().material=r,!0)},$$legacy:!0})},$$slots:{default:!0}});var n=s(i,2);o(n,{label:"CustomModelData",type:"number",intMode:!0,get tooltip(){return`[icon-data] The CustomModelData of the item that represents the ${l()??""} in GUIs`},get value(){return t().customModelData},set value(c){t(t().customModelData=c,!0)},$$legacy:!0});var v=s(n,2),u=ie(()=>"[icon-lore]"+l()=="class"?"The item's lore description":'The description shown for the item in skill trees. Include values of mechanics such as damage dealt using their "Icon Key" values');o(v,{label:"Icon Lore",get tooltip(){return m(u)},children:(c,k)=>{se(c,{get value(){return t().lore},set value(r){t(t().lore=r,!0)},$$legacy:!0})},$$slots:{default:!0}}),T(b,e),Y()}var yt=W('<div class="entry svelte-wejg12" tabindex="0" role="menuitem"> </div>'),_t=W('<div class="input svelte-wejg12"></div>');function kt(b,d){let a=R(d,"value",12,273),l=R(d,"data",8);var t=_t();ge(t,5,l,Se,(e,i,n)=>{var v=yt();const u=ie(()=>a()&Math.pow(2,n));Q(()=>Xe(v,"selected",m(u)));var c=C(v);w(v),Q(()=>pe(c,m(i))),ne("click",v,()=>a(a()^Math.pow(2,n))),ne("keypress",v,k=>{k.key==="Enter"&&a(a()^Math.pow(2,n))}),T(e,v)}),w(t),T(b,t)}var St=W('<select id="skill-tree"><option>Custom</option><option>Requirement</option><option>Basic Horizontal</option><option>Basic Vertical</option><option>Level Horizontal</option><option>Level Vertical</option><option>Flood</option></select>'),Tt=W(`<div class="info svelte-1v5246t">These are the materials that can be used as combo starters. If a material is not in the list, it
			cannot be used as a combo starter. If the list is inverted, then the materials in the list cannot be used as combo
			starters</div> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!>`,1),Pt=W('<!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <div class="info svelte-1v5246t">Drag & Drop your attributes file to use your custom attributes</div> <!> <!> <!> <!> <!> <!> <div class="header combos svelte-1v5246t" role="button" tabindex="0">Combo Starters <span class="material-symbols-rounded"> </span></div> <!>',1);function wt(b,d){K(d,!1);const a=ue(),l=()=>N(v,"$classes",a),t=()=>N(u,"$skills",a);let e=R(d,"data",12),i=j(!1),n;const v=Ge.classes,u=Fe.skills;dt(()=>{n=Me.attributes.subscribe(r=>{const g=[];e(e().attributes=e().attributes.filter(f=>r.some($=>$.name===f.name)?(g.push(f.name),!0):!1),!0);for(const f of r.filter($=>!g.includes($.name)))e().attributes.push(new De(f.name,0,0))})}),vt(()=>{n&&n()}),L(()=>(A(e()),D),()=>{var r;(r=e())!=null&&r.name&&D(),e().save()}),le(),G();var c=ke(),k=z(c);U(k,e,r=>{var g=Pt(),f=z(g);o(f,{label:"Name",tooltip:"The name of the class. This should not contain color codes",get value(){return e().name},set value(h){e(e().name=h,!0)},$$legacy:!0});var $=s(f,2);o($,{label:"Prefix",tooltip:"The prefix given to players who profess as the class which can contain color codes",get value(){return e().prefix},set value(h){e(e().prefix=h,!0)},$$legacy:!0});var P=s($,2);o(P,{label:"Action Bar",tooltip:"The format for the action bar. Leave blank to use the default formatting",get value(){return e().actionBar},set value(h){e(e().actionBar=h,!0)},$$legacy:!0});var I=s(P,2);o(I,{label:"Group",tooltip:'A class group are things such as "race", "class", and "trade". Different groups can be professed through at the same time, one class from each group',get value(){return e().group},set value(h){e(e().group=h,!0)},$$legacy:!0});var q=s(I,2);o(q,{label:"Mana Name",tooltip:"The name the class uses for mana",get value(){return e().manaName},set value(h){e(e().manaName=h,!0)},$$legacy:!0});var X=s(q,2);o(X,{label:"Max Level",tooltip:"The maximum level the class can reach. If this class turns into other classes, this will also be the level it can profess into those classes",get value(){return e().maxLevel},set value(h){e(e().maxLevel=h,!0)},$$legacy:!0});var J=s(X,2);o(J,{label:"Parent",tooltip:"The class that turns into this one. For example, if Fighter turns into Knight, then Knight would have its parent as Fighter",children:(h,H)=>{var S=ie(()=>l().filter(O=>O!==e()));be(h,{id:"parent",get data(){return m(S)},get selected(){return e().parent},set selected(O){e(e().parent=O,!0)},$$legacy:!0})},$$slots:{default:!0}});var M=s(J,2),ve=ie(()=>`Whether the class requires a permission to be professed as. The permission would be "skillapi.class.${e().name.toLowerCase()??""}"`);o(M,{label:"Permission",get tooltip(){return m(ve)},children:(h,H)=>{V(h,{get data(){return e().permission},set data(S){e(e().permission=S,!0)},$$legacy:!0})},$$slots:{default:!0}});var Z=s(M,2);o(Z,{label:"Exp Sources",tooltip:'The experience sources the class goes up from. Most of these only work if "use-exp-orbs" is enabled in the config.yml',children:(h,H)=>{kt(h,{data:$t,get value(){return e().expSources},set value(S){e(e().expSources=S,!0)},$$legacy:!0})},$$slots:{default:!0}});var ce=s(Z,2);o(ce,{label:"Health",tooltip:"The amount of health the class has",children:(h,H)=>{te(h,{get value(){return e().health},set value(S){e(e().health=S,!0)},$$legacy:!0})},$$slots:{default:!0}});var fe=s(ce,2);o(fe,{label:"Mana",tooltip:"The amount of mana the class has",children:(h,H)=>{te(h,{get value(){return e().mana},set value(S){e(e().mana=S,!0)},$$legacy:!0})},$$slots:{default:!0}});var Te=s(fe,4);ge(Te,1,()=>e().attributes,h=>h.name,(h,H,S)=>{var O=ie(()=>rt(e().attributes[S].name));o(h,{get label(){return m(O)},get tooltip(){return`The amount of ${e().attributes[S].name??""} the class has`},children:(re,de)=>{te(re,{get value(){return e().attributes[S]},set value(oe){e().attributes[S]=oe,we(()=>e().attributes)},$$legacy:!0})},$$slots:{default:!0}})});var p=s(Te,2);o(p,{label:"Mana Regen",tooltip:"The amount of mana the class regenerates at each interval. The interval is in the config.yml and by default is once every second. If you want to regen a decimal amount per second, increase the interval",get value(){return e().manaRegen},set value(h){e(e().manaRegen=h,!0)},$$legacy:!0});var E=s(p,2);o(E,{label:"Skill Tree",tooltip:"The type of skill tree to use",children:(h,H)=>{var S=St();Q(()=>{e().skillTree,we(()=>{})});var O=C(S);O.value=(O.__value="Custom")==null?"":"Custom";var re=s(O);re.value=(re.__value="Requirement")==null?"":"Requirement";var de=s(re);de.value=(de.__value="Basic Horizontal")==null?"":"Basic Horizontal";var oe=s(de);oe.value=(oe.__value="Basic Vertical")==null?"":"Basic Vertical";var $e=s(oe);$e.value=($e.__value="Level Horizontal")==null?"":"Level Horizontal";var me=s($e);me.value=(me.__value="Level Vertical")==null?"":"Level Vertical";var _e=s(me);_e.value=(_e.__value="Flood")==null?"":"Flood",w(S),mt(S,()=>e().skillTree,Pe=>e(e().skillTree=Pe,!0)),T(h,S)},$$slots:{default:!0}});var x=s(E,2);o(x,{label:"Skills",tooltip:"The skills the class is able to use",children:(h,H)=>{be(h,{id:"skills",get data(){return t()},multiple:!0,get selected(){return e().skills},set selected(S){e(e().skills=S,!0)},placeholder:"No Skills",$$legacy:!0})},$$slots:{default:!0}});var ee=s(x,2);Ne(ee,{get icon(){return e().icon},set icon(h){e(e().icon=h,!0)},$$legacy:!0});var je=s(ee,2);o(je,{label:"Unusable items",tooltip:"[blacklist] The types of items that the class cannot use",children:(h,H)=>{Je(h,{multiple:!0,get selected(){return e().unusableItems},set selected(S){e(e().unusableItems=S,!0)},$$legacy:!0})},$$slots:{default:!0}});var ye=s(je,2),Oe=s(C(ye)),et=C(Oe);w(Oe),w(ye);var tt=s(ye,2);U(tt,()=>m(i),h=>{var H=Tt(),S=s(z(H),2);o(S,{label:"L Inverted",tooltip:"Whether the L list should be used as a blacklist",children:(y,B)=>{V(y,{get data(){return e().lInverted},set data(_){e(e().lInverted=_,!0)},$$legacy:!0})},$$slots:{default:!0}});var O=s(S,2);o(O,{label:"L Whitelist",tooltip:"The materials that can be used as combo starters",children:(y,B)=>{se(y,{get value(){return e().lWhitelist},set value(_){e(e().lWhitelist=_,!0)},$$legacy:!0})},$$slots:{default:!0}});var re=s(O,2);o(re,{label:"R Inverted",tooltip:"Whether the R list should be used as a blacklist",children:(y,B)=>{V(y,{get data(){return e().rInverted},set data(_){e(e().rInverted=_,!0)},$$legacy:!0})},$$slots:{default:!0}});var de=s(re,2);o(de,{label:"R Whitelist",tooltip:"The materials that can be used as combo starters",children:(y,B)=>{se(y,{get value(){return e().rWhitelist},set value(_){e(e().rWhitelist=_,!0)},$$legacy:!0})},$$slots:{default:!0}});var oe=s(de,2);o(oe,{label:"LS Inverted",tooltip:"Whether the LS list should be used as a blacklist",children:(y,B)=>{V(y,{get data(){return e().lsInverted},set data(_){e(e().lsInverted=_,!0)},$$legacy:!0})},$$slots:{default:!0}});var $e=s(oe,2);o($e,{label:"LS Whitelist",tooltip:"The materials that can be used as combo starters",children:(y,B)=>{se(y,{get value(){return e().lsWhitelist},set value(_){e(e().lsWhitelist=_,!0)},$$legacy:!0})},$$slots:{default:!0}});var me=s($e,2);o(me,{label:"RS Inverted",tooltip:"Whether the RS list should be used as a blacklist",children:(y,B)=>{V(y,{get data(){return e().rsInverted},set data(_){e(e().rsInverted=_,!0)},$$legacy:!0})},$$slots:{default:!0}});var _e=s(me,2);o(_e,{label:"RS Whitelist",tooltip:"The materials that can be used as combo starters",children:(y,B)=>{se(y,{get value(){return e().rsWhitelist},set value(_){e(e().rsWhitelist=_,!0)},$$legacy:!0})},$$slots:{default:!0}});var Pe=s(_e,2);o(Pe,{label:"S Inverted",tooltip:"Whether the S list should be used as a blacklist",children:(y,B)=>{V(y,{get data(){return e().rsInverted},set data(_){e(e().rsInverted=_,!0)},$$legacy:!0})},$$slots:{default:!0}});var ze=s(Pe,2);o(ze,{label:"S Whitelist",tooltip:"The materials that can be used as combo starters",children:(y,B)=>{se(y,{get value(){return e().rsWhitelist},set value(_){e(e().rsWhitelist=_,!0)},$$legacy:!0})},$$slots:{default:!0}});var Ee=s(ze,2);o(Ee,{label:"P Inverted",tooltip:"Whether the P list should be used as a blacklist",children:(y,B)=>{V(y,{get data(){return e().pInverted},set data(_){e(e().pInverted=_,!0)},$$legacy:!0})},$$slots:{default:!0}});var He=s(Ee,2);o(He,{label:"P Whitelist",tooltip:"The materials that can be used as combo starters",children:(y,B)=>{se(y,{get value(){return e().pWhitelist},set value(_){e(e().pWhitelist=_,!0)},$$legacy:!0})},$$slots:{default:!0}});var Ve=s(He,2);o(Ve,{label:"Q Inverted",tooltip:"Whether the Q list should be used as a blacklist",children:(y,B)=>{V(y,{get data(){return e().qInverted},set data(_){e(e().qInverted=_,!0)},$$legacy:!0})},$$slots:{default:!0}});var Ue=s(Ve,2);o(Ue,{label:"Q Whitelist",tooltip:"The materials that can be used as combo starters",children:(y,B)=>{se(y,{get value(){return e().qWhitelist},set value(_){e(e().qWhitelist=_,!0)},$$legacy:!0})},$$slots:{default:!0}});var Qe=s(Ue,2);o(Qe,{label:"F Inverted",tooltip:"Whether the F list should be used as a blacklist",children:(y,B)=>{V(y,{get data(){return e().fInverted},set data(_){e(e().fInverted=_,!0)},$$legacy:!0})},$$slots:{default:!0}});var at=s(Qe,2);o(at,{label:"F Whitelist",tooltip:"The materials that can be used as combo starters",children:(y,B)=>{se(y,{get value(){return e().fWhitelist},set value(_){e(e().fWhitelist=_,!0)},$$legacy:!0})},$$slots:{default:!0}}),T(h,H)}),Q(()=>pe(et,m(i)?"expand_less":"expand_more")),ne("click",ye,()=>F(i,!m(i))),ne("keypress",ye,h=>{h.key==="Enter"&&F(i,!m(i))}),T(r,g)}),T(b,c),Y()}var It=W('<div class="attr svelte-1ihs233" tabindex="0" role="button" aria-label="Remove Attribute" title="Remove Attribute"><div class="name svelte-1ihs233"> </div> <div class="value svelte-1ihs233"> </div></div>'),Ct=W('<div class="wrapper svelte-1ihs233"></div>'),xt=W('<!> <!> <!> <div class="btn svelte-1ihs233" tabindex="0" role="button" aria-label="Add Attribute" title="Add Attribute">Add Attribute</div>',1);function At(b,d){K(d,!1);const a=j();let l=R(d,"value",28,()=>[]),t=j("");const e=r=>{m(t)&&(r&&r.type==="keypress"&&r.key!=="Enter"||(l([...l(),m(a)]),F(t,"")))},i=r=>{l(l().filter(g=>g!==r))};L(()=>m(t),()=>{F(a,new De(m(t),0,0))}),le(),G();var n=xt(),v=z(n);U(v,()=>l().length>0,r=>{var g=Ct();ge(g,5,l,Se,($,P)=>{var I=It(),q=C(I),X=C(q);w(q);var J=s(q,2),M=C(J);w(J),w(I),Q(()=>{pe(X,m(P).name),pe(M,`${m(P).base??""}+(${m(P).scale??""})`)}),ne("click",I,()=>i(m(P))),ne("keypress",I,()=>i(m(P))),T($,I)}),w(g),T(r,g)});var u=s(v,2);o(u,{label:"Attribute Name",placeholder:"Attribute Name",get value(){return m(t)},set value(r){F(t,r)},$$legacy:!0});var c=s(u,2);o(c,{get label(){return`${m(t)??""} Value`},children:(r,g)=>{te(r,{get value(){return m(a)},set value(f){F(a,f)},$$legacy:!0})},$$slots:{default:!0}});var k=s(c,2);Q(()=>Xe(k,"disabled",!m(t))),ne("click",k,e),ne("keypress",k,e),T(b,n),Y()}var Lt=W('<!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <div class="header svelte-mjz973">Requirements</div> <!> <!> <!> <!> <!> <div class="header svelte-mjz973">Attribute Requirements</div> <!>',1);function Wt(b,d){K(d,!1);const a=ue(),l=()=>N(e,"$skills",a);let t=R(d,"data",12);const e=Fe.skills;L(()=>(A(t()),D),()=>{var v;(v=t())!=null&&v.name&&D(),t().save()}),le(),G();var i=ke(),n=z(i);U(n,t,v=>{var u=Lt(),c=z(u);o(c,{label:"Name",tooltip:"The name of the skill. This should not contain color codes",get value(){return t().name},set value(p){t(t().name=p,!0)},$$legacy:!0});var k=s(c,2);o(k,{label:"Type",tooltip:'The flavor text describing the skill such as "AOE utility" or whatever you want it to be',get value(){return t().type},set value(p){t(t().type=p,!0)},$$legacy:!0});var r=s(k,2);o(r,{label:"Max Level",tooltip:"The maximum level the skill can reach",get value(){return t().maxLevel},set value(p){t(t().maxLevel=p,!0)},$$legacy:!0});var g=s(r,2);o(g,{label:"Cost",tooltip:"The amount of skill points needed to unlock and upgrade this skill",children:(p,E)=>{te(p,{get value(){return t().cost},set value(x){t(t().cost=x,!0)},$$legacy:!0})},$$slots:{default:!0}});var f=s(g,2);o(f,{label:"Cooldown",tooltip:"The time in seconds before the skill can be cast again (only works with the Cast trigger)",children:(p,E)=>{te(p,{get value(){return t().cooldown},set value(x){t(t().cooldown=x,!0)},$$legacy:!0})},$$slots:{default:!0}});var $=s(f,2);o($,{label:"Cooldown Message",tooltip:"Whether to send a message when attempting to run the skill while in cooldown",children:(p,E)=>{V(p,{get data(){return t().cooldownMessage},set data(x){t(t().cooldownMessage=x,!0)},$$legacy:!0})},$$slots:{default:!0}});var P=s($,2);o(P,{label:"Mana",tooltip:"The amount of mana it takes to cast the skill (only works with the Cast trigger)",children:(p,E)=>{te(p,{get value(){return t().mana},set value(x){t(t().mana=x,!0)},$$legacy:!0})},$$slots:{default:!0}});var I=s(P,2);o(I,{label:"Cast Message",tooltip:"The message to display to players around the caster when the skill is cast. The radius of the area is in the config.yml options",get value(){return t().castMessage},set value(p){t(t().castMessage=p,!0)},$$legacy:!0});var q=s(I,2);o(q,{label:"Combo",tooltip:'The click combo to assign the skill (if enabled). Use L, R, S, LS, RS, P, Q and F for the types of clicks separated by spaces. For example, "L L R R" would work for 4 click combos.',get value(){return t().combo},set value(p){t(t().combo=p,!0)},$$legacy:!0});var X=s(q,2);Ne(X,{get icon(){return t().icon},set icon(p){t(t().icon=p,!0)},$$legacy:!0});var J=s(X,2);o(J,{label:"Incompatible",tooltip:"List of skills that must not be upgraded in order to upgrade this skill",children:(p,E)=>{var x=ie(()=>l().filter(ee=>ee!==t()));be(p,{multiple:!0,get data(){return m(x)},get selected(){return t().incompatible},set selected(ee){t(t().incompatible=ee,!0)},$$legacy:!0})},$$slots:{default:!0}});var M=s(J,4);o(M,{label:"Skill Requirement",tooltip:"The skill that needs to be upgraded before this one can be unlocked",children:(p,E)=>{var x=ie(()=>l().filter(ee=>ee!==t()));be(p,{id:"skillReq",get selected(){return t().skillReq},set selected(ee){t(t().skillReq=ee,!0)},get data(){return m(x)},$$legacy:!0})},$$slots:{default:!0}});var ve=s(M,2);o(ve,{label:"Skill Req Level",tooltip:"The level that the required skill needs to reach before this one can be unlocked",get value(){return t().skillReqLevel},set value(p){t(t().skillReqLevel=p,!0)},$$legacy:!0});var Z=s(ve,2);o(Z,{label:"Permission",get tooltip(){return`Whether this skill requires a permission to unlock. The permission would be "skillapi.skill.${t().name??""}"`},children:(p,E)=>{V(p,{get data(){return t().permission},set data(x){t(t().permission=x,!0)},$$legacy:!0})},$$slots:{default:!0}});var ce=s(Z,2);o(ce,{label:"Level Req",tooltip:"The class level the player needs to be before unlocking or upgrading this skill",children:(p,E)=>{te(p,{get value(){return t().levelReq},set value(x){t(t().levelReq=x,!0)},$$legacy:!0})},$$slots:{default:!0}});var fe=s(ce,2);o(fe,{label:"Min Spent",tooltip:"The amount of skill points that need to be spent before upgrading this skill",children:(p,E)=>{te(p,{get value(){return t().minSpent},set value(x){t(t().minSpent=x,!0)},$$legacy:!0})},$$slots:{default:!0}});var Te=s(fe,4);At(Te,{get value(){return t().attributeRequirements},set value(p){t(t().attributeRequirements=p,!0)},$$legacy:!0}),T(v,u)}),T(b,i),Y()}var Rt=W('<div class="stat svelte-19i6c7i"><div class="btn-del svelte-19i6c7i"><!></div> <!> <!></div>');function qt(b,d){K(d,!1);const a=ue(),l=()=>N(m(e),"$selected",a),t=()=>N(m(i),"$availableStats",a),e=j(),i=j();let n=R(d,"stat",12),v=R(d,"component",8);L(()=>A(n()),()=>{ae(F(e,n().key),"$selected",a)}),L(()=>A(v()),()=>{ae(F(i,v().availableStats),"$availableStats",a)}),L(()=>(l(),A(n()),A(v()),D),()=>{var f;l()&&n().formula&&((f=v().section.attribute)!=null&&f.name)&&D(),v().section.attribute.save()}),le(),G();var u=Rt(),c=C(u),k=C(c);he(k,{title:"Delete stat",icon:"delete",color:"red",$$events:{click:()=>v().removeStat(n()),keypress:()=>v().removeStat(n())}}),w(c);var r=s(c,2);o(r,{label:"Option",tooltip:"Attribute option to modify based on attribute value",children:(f,$)=>{be(f,{get selected(){return l()},set selected(P){Be(m(e),P)},get data(){return t()},multiple:!1,$$legacy:!0})},$$slots:{default:!0}});var g=s(r,2);qe(g,{get data(){return n().formula},set data(f){n(n().formula=f,!0)},name:"Formula",tooltip:"Formula to modify the option by",$$legacy:!0}),w(u),T(b,u),Y()}var Mt=W('<div class="component svelte-k4qkgo"><div class="componentTitle svelte-k4qkgo"><!></div> <!> <div class="controls svelte-k4qkgo"><!> <!></div></div>');function Ft(b,d){K(d,!1);const a=ue(),l=()=>N(m(v),"$stats",a),t=()=>N(m(n),"$selected",a),e=()=>N(m(u),"$availableComponents",a),i=()=>N(m(c),"$availableStats",a),n=j(),v=j(),u=j(),c=j();let k=R(d,"color",8),r=R(d,"component",8),g=R(d,"section",8);L(()=>A(r()),()=>{ae(F(n,r().name),"$selected",a)}),L(()=>A(r()),()=>{ae(F(v,r().stats),"$stats",a)}),L(()=>A(g()),()=>{ae(F(u,g().availableComponents),"$availableComponents",a)}),L(()=>A(r()),()=>{ae(F(c,r().availableStats),"$availableStats",a)}),L(()=>(l(),A(r()),D),()=>{var M;l()&&((M=r().section.attribute)!=null&&M.name)&&D(),r().section.attribute.save()}),le(),G();var f=Mt(),$=C(f),P=C($);o(P,{label:"Component",tooltip:"The component to modify options to",children:(M,ve)=>{be(M,{get selected(){return t()},set selected(Z){Be(m(n),Z)},get data(){return e()},multiple:!1,$$legacy:!0})},$$slots:{default:!0}}),w($);var I=s($,2);ge(I,1,l,Se,(M,ve,Z)=>{qt(M,{get stat(){return l()[Z]},set stat(ce){l()[Z]=ce,we(()=>l()),Ze(a,"$stats")},get component(){return r()},$$legacy:!0})});var q=s(I,2),X=C(q);U(X,()=>i().length>0,M=>{he(M,{title:"Add Stat",icon:"add",color:"gray",$$events:{click:()=>r().addStat(i()[0]),keypress:()=>r().addStat(i()[0])}})});var J=s(X,2);he(J,{title:"Delete Component",icon:"delete",color:"red",$$events:{click:()=>g().removeComponent(r()),keypress:()=>g().removeComponent(r())}}),w(q),w(f),Q(()=>ht(f,"--comp-color",k())),T(b,f),Y()}var Dt=W('<div class="btn svelte-1y16mx6"><!></div>'),Bt=W('<div class="section svelte-1y16mx6"><div class="header svelte-1y16mx6"> </div> <!> <!></div>');function We(b,d){K(d,!1);const a=ue(),l=()=>N(m(e),"$components",a),t=()=>N(m(i),"$availableComponents",a),e=j(),i=j();let n=R(d,"name",8),v=n()==="Target"?"#04af38":n()==="Condition"?"#feac00":"#ff3a3a",u=R(d,"section",8);L(()=>A(u()),()=>{ae(F(e,u().components),"$components",a)}),L(()=>A(u()),()=>{ae(F(i,u().availableComponents),"$availableComponents",a)}),L(()=>(l(),A(u()),D),()=>{var $;l()&&(($=u().attribute)!=null&&$.name)&&D(),u().attribute.save()}),le(),G();var c=Bt(),k=C(c),r=C(k);w(k);var g=s(k,2);ge(g,1,l,Se,($,P,I)=>{Ft($,{color:v,get component(){return l()[I]},set component(q){l()[I]=q,we(()=>l()),Ze(a,"$components")},get section(){return u()},$$legacy:!0})});var f=s(g,2);U(f,()=>t().length>0,$=>{var P=Dt(),I=C(P),q=ie(()=>`Add ${n()}`);he(I,{get title(){return m(q)},icon:"add",color:v,$$events:{click:()=>u().addComponent(t()[0]),keypress:()=>u().addComponent(t()[0])}}),w(P),T($,P)}),w(c),Q(()=>pe(r,`${n()??""} modifiers`)),T(b,c),Y()}var Nt=W('<div class="stat svelte-100qrpg"><div class="btn-del svelte-100qrpg"><!></div> <!> <!></div>');function jt(b,d){K(d,!1);const a=ue(),l=()=>N(m(t),"$selected",a),t=j();let e=R(d,"stats",8),i=R(d,"stat",12);L(()=>A(i()),()=>{ae(F(t,i().key),"$selected",a)}),L(()=>(l(),A(i()),A(e()),D),()=>{var r;l()&&i().formula&&((r=e().attribute)!=null&&r.name)&&D(),e().attribute.save()}),le(),G();var n=Nt(),v=C(n),u=C(v);he(u,{title:"Delete stat",icon:"delete",color:"red",$$events:{click:()=>e().removeStat(i()),keypress:()=>e().removeStat(i())}}),w(v);var c=s(v,2);qe(c,{get data(){return l()},set data(r){Be(m(t),r)},name:"Stat",tooltip:"Attribute option to modify based on attribute value",$$legacy:!0});var k=s(c,2);qe(k,{get data(){return i().formula},set data(r){i(i().formula=r,!0)},name:"Formula",tooltip:"Formula to modify the option by",$$legacy:!0}),w(n),T(b,n),Y()}var Ot=W('<div class="stats svelte-3opmim"><div class="header svelte-3opmim">Stat modifiers</div> <!> <div class="btn svelte-3opmim"><!></div></div>');function zt(b,d){K(d,!1);const a=ue(),l=()=>N(m(t),"$statArray",a),t=j();let e=R(d,"stats",12);L(()=>A(e()),()=>{ae(F(t,e().stats),"$statArray",a)}),L(()=>(l(),A(e()),D),()=>{var c;l()&&((c=e().attribute)!=null&&c.name)&&D(),e().attribute.save()}),le(),G();var i=Ot(),n=s(C(i),2);ge(n,1,l,Se,(c,k)=>{jt(c,{get stats(){return e()},set stats(r){e(r)},get stat(){return m(k)},$$legacy:!0})});var v=s(n,2),u=C(v);he(u,{title:"Add Stat",icon:"add",color:"gray",$$events:{click:()=>e().addStat(),keypress:()=>e().addStat()}}),w(v),w(i),T(b,i),Y()}var Et=W("<!> <!> <!> <!> <!> <!> <!> <!>",1);function Ht(b,d){K(d,!1);let a=R(d,"data",12);L(()=>(A(a()),D),()=>{var e;(e=a())!=null&&e.name&&D(),a().save()}),le(),G();var l=ke(),t=z(l);U(t,a,e=>{var i=Et(),n=z(i);o(n,{label:"Name",tooltip:"The name of the attribute. This should not contain color codes",get value(){return a().name},set value($){a(a().name=$,!0)},$$legacy:!0});var v=s(n,2);o(v,{label:"Max",type:"number",tooltip:"The maximum points of this attribute that a player can have",get value(){return a().max},set value($){a(a().max=$,!0)},$$legacy:!0});var u=s(v,2);o(u,{label:"Cost",tooltip:"How many attribute points it costs to upgrade the attribute, increasing with the level of the attribute",children:($,P)=>{te($,{get value(){return a().cost},set value(I){a(a().cost=I,!0)},$$legacy:!0})},$$slots:{default:!0}});var c=s(u,2);Ne(c,{get icon(){return a().icon},set icon($){a(a().icon=$,!0)},$$legacy:!0});var k=s(c,2);We(k,{name:"Target",get section(){return a().targets},set section($){a(a().targets=$,!0)},$$legacy:!0});var r=s(k,2);We(r,{name:"Condition",get section(){return a().conditions},set section($){a(a().conditions=$,!0)},$$legacy:!0});var g=s(r,2);We(g,{name:"Mechanic",get section(){return a().mechanics},set section($){a(a().mechanics=$,!0)},$$legacy:!0});var f=s(g,2);zt(f,{get stats(){return a().stats},set stats($){a(a().stats=$,!0)},$$legacy:!0}),T(e,i)}),T(b,l),Y()}var Vt=W('<a class="material-symbols-rounded chip edit-skill svelte-191pm8d">auto_fix</a>'),Ut=W('<h1 class="svelte-191pm8d"> <!></h1> <hr> <div class="container svelte-191pm8d"><!></div>',1);function la(b,d){K(d,!1);let a=R(d,"data",12);G();var l=Ut();ut(u=>{Q(()=>ct.title=`Fabled Dynamic Editor - ${a().data.name??""}`)});var t=z(l),e=C(t),i=s(e);U(i,()=>{var u;return((u=a())==null?void 0:u.data)instanceof Ke},u=>{var c=Vt();Q(()=>nt(c,"href",`${it??""}/skill/${a().data.name??""}`)),T(u,c)}),w(t);var n=s(t,4),v=C(n);U(v,()=>{var u;return((u=a())==null?void 0:u.data)instanceof ot},u=>{wt(u,{get data(){return a().data},set data(c){a(a().data=c,!0)},$$legacy:!0})},u=>{var c=ke(),k=z(c);U(k,()=>{var r;return((r=a())==null?void 0:r.data)instanceof Ke},r=>{Wt(r,{get data(){return a().data},set data(g){a(a().data=g,!0)},$$legacy:!0})},r=>{var g=ke(),f=z(g);U(f,()=>{var $;return(($=a())==null?void 0:$.data)instanceof Re},$=>{Ht($,{get data(){return a().data},set data(P){a(a().data=P,!0)},$$legacy:!0})},null,!0),T(r,g)},!0),T(u,c)}),w(n),Q(()=>{var u,c;return pe(e,`${((c=(u=a())==null?void 0:u.data)==null?void 0:c.name)??""} `)}),T(b,l),Y()}export{la as component,sa as universal};
