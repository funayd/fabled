import{a3 as He,a6 as we,h as Ce,a5 as Ie,p as ke,i as $e,a as Ge,j as ye,T as Se,P as o,ap as Oe,aq as O,X as Xe,q as le,r as ce,u as Ve,ar as ee,C as M,as as Ze,at as z,au as Je,av as xe,c as et,Z as ze,a4 as tt,b as at}from"../chunks/components.svelte.C8WsT825.js";import{g as Te,b as lt}from"../chunks/entry.CEFLSdhT.js";import{r as Ee,C as te}from"../chunks/Control.BPTtxdaA.js";import{s as Ae,a as k,t as x,c as pe,d as Le,b as ae,e as fe,i as de,h as st}from"../chunks/disclose-version.Ca3QTfmr.js";import{n as F,o as R,w as l,g,q as B,f as U,v as $,t as E,s as S,a as _e,D as ge,aa as Ue,$ as rt}from"../chunks/utils.zETNLfH2.js";import{p as H,o as ot,d as nt,a as D,b as be}from"../chunks/index-client.Cq_m8h8c.js";import{b as it}from"../chunks/select.BWYAhR8U.js";const ut=!1;async function dt({params:c}){const s=c.id,a=c.type==="skill";let r,t;switch(c.type){case"skill":for(const e of Te(Ce.skills))if(t||(t=e),e.name==s){r=e;break}break;case"attribute":for(const e of Te(we.attributes))if(t||(t=e),e.name==s){r=e;break}break;default:for(const e of Te(He.classes))if(t||(t=e),e.name==s){r=e;break}break}if(r){let e=!1;if(!r.loaded){let n;if(r.location==="local")if(r instanceof Ie){const u=localStorage.getItem("attribs")||"";u.split(`
`).length>2||u.charAt(0)=="{"?n=ke(u):n={}}else e=!0,n=ke(localStorage.getItem(`sapi.${a?"skill":"class"}.${r.name}`)||"");else{let u;c.type=="class"?u=await $e.getClassYaml(r.name):c.type==="skill"?u=await $e.getSkillYaml(r.name):u=await $e.getAttributeYaml(),n=ke(u)}n&&Object.keys(n).length>0&&(r instanceof Ie?r.load(n[r.name]):r.load(Object.values(n)[0])),e&&a&&r.postLoad()}switch(e&&!a&&ct(r),Ge.set(r),c.type){case"skill":ye.set(Se.SKILLS);break;case"attribute":ye.set(Se.ATTRIBUTES);break;default:ye.set(Se.CLASSES);break}return{data:r}}else t?Ee(302,`/${c.type}/${t.name}`):Ee(302,"/")}const ct=c=>{for(const s of we.getAttributeNames())c.attributes.find(a=>a.name===s)||c.attributes.push({name:s,base:0,scale:0})},Yt=Object.freeze(Object.defineProperty({__proto__:null,load:dt,ssr:ut},Symbol.toStringTag,{value:"Module"}));var vt=x("<!> <!> <!>",1);function We(c,s){F(s,!0);const a=Ae(),r=()=>pe(Xe,"$activeType",a);let t=H(s,"icon",15);var e=vt(),n=R(e);o(n,{label:"Icon",get tooltip(){return`[icon] The item that represents the ${r()??""} in GUIs`},children:(b,m)=>{Oe(b,{get selected(){return t().material},set selected(_){t(t().material=_,!0)}})},$$slots:{default:!0}});var u=l(n,2);o(u,{label:"CustomModelData",type:"number",intMode:!0,get tooltip(){return`[icon-data] The CustomModelData of the item that represents the ${r()??""} in GUIs`},get value(){return t().customModelData},set value(b){t(t().customModelData=b,!0)}});var i=l(u,2),h=U(()=>"[icon-lore]"+r()=="class"?"The item's lore description":'The description shown for the item in skill trees. Include values of mechanics such as damage dealt using their "Icon Key" values');o(i,{label:"Icon Lore",get tooltip(){return g(h)},children:(b,m)=>{O(b,{get value(){return t().lore},set value(_){t(t().lore=_,!0)}})},$$slots:{default:!0}}),k(c,e),B()}var ht=x('<div class="entry svelte-wejg12" tabindex="0" role="menuitem"> </div>'),mt=x('<div class="input svelte-wejg12"></div>');function bt(c,s){let a=H(s,"value",15,273);var r=mt();le(r,21,()=>s.data,ce,(t,e,n)=>{var u=ht();u.__click=()=>a(a()^Math.pow(2,n));const i=U(()=>a()&Math.pow(2,n));E(()=>Ve(u,"selected",g(i)));var h=S(u,!0);$(u),E(()=>ae(h,g(e))),fe("keypress",u,b=>{b.key==="Enter"&&a(a()^Math.pow(2,n))}),k(t,u)}),$(r),k(c,r)}Le(["click"]);var pt=x('<select id="skill-tree"><option>Custom</option><option>Requirement</option><option>Basic Horizontal</option><option>Basic Vertical</option><option>Level Horizontal</option><option>Level Vertical</option><option>Flood</option></select>'),ft=(c,s)=>ge(s,!g(s)),gt=x(`<div class="info svelte-1v5246t">These are the materials that can be used as combo starters. If a material is not in the list, it
			cannot be used as a combo starter. If the list is inverted, then the materials in the list cannot be used as combo
			starters</div> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!>`,1),_t=x('<!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <div class="info svelte-1v5246t">Drag & Drop your attributes file to use your custom attributes</div> <!> <!> <!> <!> <!> <!> <div class="header combos svelte-1v5246t" role="button" tabindex="0">Combo Starters <span class="material-symbols-rounded"> </span></div> <!>',1);function kt(c,s){F(s,!0);const a=Ae(),r=()=>pe(i,"$classes",a),t=()=>pe(h,"$skills",a);let e=H(s,"data",15),n=Ue(!1),u;const i=He.classes,h=Ce.skills;ot(()=>{u=we.attributes.subscribe(_=>{const C=[];e(e().attributes=e().attributes.filter(T=>_.some(w=>w.name===T.name)?(C.push(T.name),!0):!1),!0);for(const T of _.filter(w=>!C.includes(w.name)))e().attributes.push({name:T.name,base:0,scale:0})})}),nt(()=>{u&&u()}),_e(()=>e().save());var b=de(),m=R(b);D(m,e,_=>{var C=_t(),T=R(C);o(T,{label:"Name",tooltip:"The name of the class. This should not contain color codes",get value(){return e().name},set value(d){e(e().name=d,!0)}});var w=l(T,2);o(w,{label:"Prefix",tooltip:"The prefix given to players who profess as the class which can contain color codes",get value(){return e().prefix},set value(d){e(e().prefix=d,!0)}});var y=l(w,2);o(y,{label:"Action Bar",tooltip:"The format for the action bar. Leave blank to use the default formatting",get value(){return e().actionBar},set value(d){e(e().actionBar=d,!0)}});var N=l(y,2);o(N,{label:"Group",tooltip:'A class group are things such as "race", "class", and "trade". Different groups can be professed through at the same time, one class from each group',get value(){return e().group},set value(d){e(e().group=d,!0)}});var K=l(N,2);o(K,{label:"Mana Name",tooltip:"The name the class uses for mana",get value(){return e().manaName},set value(d){e(e().manaName=d,!0)}});var V=l(K,2);o(V,{label:"Max Level",tooltip:"The maximum level the class can reach. If this class turns into other classes, this will also be the level it can profess into those classes",get value(){return e().maxLevel},set value(d){e(e().maxLevel=d,!0)}});var Q=l(V,2);o(Q,{label:"Parent",tooltip:"The class that turns into this one. For example, if Fighter turns into Knight, then Knight would have its parent as Fighter",children:(d,L)=>{var I=U(()=>r().filter(W=>W!==e()));ee(d,{id:"parent",get data(){return g(I)},get selected(){return e().parent},set selected(W){e(e().parent=W,!0)}})},$$slots:{default:!0}});var se=l(Q,2),ve=U(()=>`Whether the class requires a permission to be professed as. The permission would be "skillapi.class.${e().name.toLowerCase()??""}"`);o(se,{label:"Permission",get tooltip(){return g(ve)},children:(d,L)=>{M(d,{get data(){return e().permission},set data(I){e(e().permission=I,!0)}})},$$slots:{default:!0}});var re=l(se,2);o(re,{label:"Exp Sources",tooltip:'The experience sources the class goes up from. Most of these only work if "use-exp-orbs" is enabled in the config.yml',children:(d,L)=>{bt(d,{data:Ze,get value(){return e().expSources},set value(I){e(e().expSources=I,!0)}})},$$slots:{default:!0}});var oe=l(re,2);o(oe,{label:"Health",tooltip:"The amount of health the class has",children:(d,L)=>{z(d,{get value(){return e().health}})},$$slots:{default:!0}});var ne=l(oe,2);o(ne,{label:"Mana",tooltip:"The amount of mana the class has",children:(d,L)=>{z(d,{get value(){return e().mana}})},$$slots:{default:!0}});var he=l(ne,4);le(he,17,()=>e().attributes,d=>d.name,(d,L)=>{var I=U(()=>Je(g(L).name));o(d,{get label(){return g(I)},get tooltip(){return`The amount of ${g(L).name??""} the class has`},children:(W,Y)=>{z(W,{get value(){return g(L)}})},$$slots:{default:!0}})});var v=l(he,2);o(v,{label:"Mana Regen",tooltip:"The amount of mana the class regenerates at each interval. The interval is in the config.yml and by default is once every second. If you want to regen a decimal amount per second, increase the interval",get value(){return e().manaRegen},set value(d){e(e().manaRegen=d,!0)}});var q=l(v,2);o(q,{label:"Skill Tree",tooltip:"The type of skill tree to use",children:(d,L)=>{var I=pt(),W=S(I);W.value=(W.__value="Custom")==null?"":"Custom";var Y=l(W);Y.value=(Y.__value="Requirement")==null?"":"Requirement";var G=l(Y);G.value=(G.__value="Basic Horizontal")==null?"":"Basic Horizontal";var X=l(G);X.value=(X.__value="Basic Vertical")==null?"":"Basic Vertical";var Z=l(X);Z.value=(Z.__value="Level Horizontal")==null?"":"Level Horizontal";var J=l(Z);J.value=(J.__value="Level Vertical")==null?"":"Level Vertical";var ue=l(J);ue.value=(ue.__value="Flood")==null?"":"Flood",$(I),it(I,()=>e().skillTree,me=>e(e().skillTree=me,!0)),k(d,I)},$$slots:{default:!0}});var P=l(q,2);o(P,{label:"Skills",tooltip:"The skills the class is able to use",children:(d,L)=>{ee(d,{id:"skills",get data(){return t()},multiple:!0,get selected(){return e().skills},set selected(I){e(e().skills=I,!0)},placeholder:"No Skills"})},$$slots:{default:!0}});var j=l(P,2);We(j,{get icon(){return e().icon},set icon(d){e(e().icon=d,!0)}});var Re=l(j,2);o(Re,{label:"Unusable items",tooltip:"[blacklist] The types of items that the class cannot use",children:(d,L)=>{Oe(d,{multiple:!0,get selected(){return e().unusableItems},set selected(I){e(e().unusableItems=I,!0)}})},$$slots:{default:!0}});var ie=l(Re,2);ie.__click=[ft,n];var qe=l(S(ie)),Ke=S(qe,!0);$(qe),$(ie);var Qe=l(ie,2);D(Qe,()=>g(n),d=>{var L=gt(),I=l(R(L),2);o(I,{label:"L Inverted",tooltip:"Whether the L list should be used as a blacklist",children:(p,A)=>{M(p,{get data(){return e().lInverted},set data(f){e(e().lInverted=f,!0)}})},$$slots:{default:!0}});var W=l(I,2);o(W,{label:"L Whitelist",tooltip:"The materials that can be used as combo starters",children:(p,A)=>{O(p,{get value(){return e().lWhitelist},set value(f){e(e().lWhitelist=f,!0)}})},$$slots:{default:!0}});var Y=l(W,2);o(Y,{label:"R Inverted",tooltip:"Whether the R list should be used as a blacklist",children:(p,A)=>{M(p,{get data(){return e().rInverted},set data(f){e(e().rInverted=f,!0)}})},$$slots:{default:!0}});var G=l(Y,2);o(G,{label:"R Whitelist",tooltip:"The materials that can be used as combo starters",children:(p,A)=>{O(p,{get value(){return e().rWhitelist},set value(f){e(e().rWhitelist=f,!0)}})},$$slots:{default:!0}});var X=l(G,2);o(X,{label:"LS Inverted",tooltip:"Whether the LS list should be used as a blacklist",children:(p,A)=>{M(p,{get data(){return e().lsInverted},set data(f){e(e().lsInverted=f,!0)}})},$$slots:{default:!0}});var Z=l(X,2);o(Z,{label:"LS Whitelist",tooltip:"The materials that can be used as combo starters",children:(p,A)=>{O(p,{get value(){return e().lsWhitelist},set value(f){e(e().lsWhitelist=f,!0)}})},$$slots:{default:!0}});var J=l(Z,2);o(J,{label:"RS Inverted",tooltip:"Whether the RS list should be used as a blacklist",children:(p,A)=>{M(p,{get data(){return e().rsInverted},set data(f){e(e().rsInverted=f,!0)}})},$$slots:{default:!0}});var ue=l(J,2);o(ue,{label:"RS Whitelist",tooltip:"The materials that can be used as combo starters",children:(p,A)=>{O(p,{get value(){return e().rsWhitelist},set value(f){e(e().rsWhitelist=f,!0)}})},$$slots:{default:!0}});var me=l(ue,2);o(me,{label:"S Inverted",tooltip:"Whether the S list should be used as a blacklist",children:(p,A)=>{M(p,{get data(){return e().rsInverted},set data(f){e(e().rsInverted=f,!0)}})},$$slots:{default:!0}});var Me=l(me,2);o(Me,{label:"S Whitelist",tooltip:"The materials that can be used as combo starters",children:(p,A)=>{O(p,{get value(){return e().rsWhitelist},set value(f){e(e().rsWhitelist=f,!0)}})},$$slots:{default:!0}});var De=l(Me,2);o(De,{label:"P Inverted",tooltip:"Whether the P list should be used as a blacklist",children:(p,A)=>{M(p,{get data(){return e().pInverted},set data(f){e(e().pInverted=f,!0)}})},$$slots:{default:!0}});var Fe=l(De,2);o(Fe,{label:"P Whitelist",tooltip:"The materials that can be used as combo starters",children:(p,A)=>{O(p,{get value(){return e().pWhitelist},set value(f){e(e().pWhitelist=f,!0)}})},$$slots:{default:!0}});var Be=l(Fe,2);o(Be,{label:"Q Inverted",tooltip:"Whether the Q list should be used as a blacklist",children:(p,A)=>{M(p,{get data(){return e().qInverted},set data(f){e(e().qInverted=f,!0)}})},$$slots:{default:!0}});var Ne=l(Be,2);o(Ne,{label:"Q Whitelist",tooltip:"The materials that can be used as combo starters",children:(p,A)=>{O(p,{get value(){return e().qWhitelist},set value(f){e(e().qWhitelist=f,!0)}})},$$slots:{default:!0}});var je=l(Ne,2);o(je,{label:"F Inverted",tooltip:"Whether the F list should be used as a blacklist",children:(p,A)=>{M(p,{get data(){return e().fInverted},set data(f){e(e().fInverted=f,!0)}})},$$slots:{default:!0}});var Ye=l(je,2);o(Ye,{label:"F Whitelist",tooltip:"The materials that can be used as combo starters",children:(p,A)=>{O(p,{get value(){return e().fWhitelist},set value(f){e(e().fWhitelist=f,!0)}})},$$slots:{default:!0}}),k(d,L)}),E(()=>ae(Ke,g(n)?"expand_less":"expand_more")),fe("keypress",ie,d=>{d.key==="Enter"&&ge(n,!g(n))}),k(_,C)}),k(c,b),B()}Le(["click"]);var $t=(c,s,a)=>s(g(a)),yt=x('<div class="attr svelte-1ihs233" tabindex="0" role="button" aria-label="Remove Attribute" title="Remove Attribute"><div class="name svelte-1ihs233"> </div> <div class="value svelte-1ihs233"> </div></div>'),St=x('<div class="wrapper svelte-1ihs233"></div>'),Tt=x('<!> <!> <!> <div aria-label="Add Attribute" class="btn svelte-1ihs233" role="button" tabindex="0" title="Add Attribute">Add Attribute</div>',1);function Pt(c,s){F(s,!0);let a=H(s,"value",31,()=>be([])),r=Ue(be({name:"",base:0,scale:0}));const t=m=>{g(r).name&&(m&&m.type==="keypress"&&m.key!=="Enter"||(a([...a(),g(r)]),ge(r,be({name:"",base:0,scale:0}))))},e=m=>{a(a().filter(_=>_!==m))};var n=Tt(),u=R(n);D(u,()=>a().length>0,m=>{var _=St();le(_,21,a,ce,(T,w)=>{var y=yt();y.__click=[$t,e,w];var N=S(y),K=S(N,!0);$(N);var V=l(N,2),Q=S(V);$(V),$(y),E(()=>{ae(K,g(w).name),ae(Q,`${g(w).base??""}+(${g(w).scale??""})`)}),fe("keypress",y,()=>e(g(w))),k(T,y)}),$(_),k(m,_)});var i=l(u,2);o(i,{get value(){return g(r).name},set value(m){g(r).name=m},label:"Attribute Name",placeholder:"Attribute Name"});var h=l(i,2);o(h,{get label(){return`${g(r).name??""} Value`},children:(m,_)=>{z(m,{get value(){return g(r)},set value(C){ge(r,be(C))}})},$$slots:{default:!0}});var b=l(h,2);b.__click=t,E(()=>Ve(b,"disabled",!g(r).name)),fe("keypress",b,t),k(c,n),B()}Le(["click"]);var It=x('<!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <div class="header svelte-mjz973">Requirements</div> <!> <!> <!> <!> <!> <div class="header svelte-mjz973">Attribute Requirements</div> <!>',1);function xt(c,s){F(s,!0);const a=Ae(),r=()=>pe(e,"$skills",a);let t=H(s,"data",15);const e=Ce.skills;_e(()=>t().save());var n=de(),u=R(n);D(u,t,i=>{var h=It(),b=R(h);o(b,{label:"Name",tooltip:"The name of the skill. This should not contain color codes",get value(){return t().name},set value(v){t(t().name=v,!0)}});var m=l(b,2);o(m,{label:"Type",tooltip:'The flavor text describing the skill such as "AOE utility" or whatever you want it to be',get value(){return t().type},set value(v){t(t().type=v,!0)}});var _=l(m,2);o(_,{label:"Max Level",tooltip:"The maximum level the skill can reach",get value(){return t().maxLevel},set value(v){t(t().maxLevel=v,!0)}});var C=l(_,2);o(C,{label:"Cost",tooltip:"The amount of skill points needed to unlock and upgrade this skill",children:(v,q)=>{z(v,{get value(){return t().cost},set value(P){t(t().cost=P,!0)}})},$$slots:{default:!0}});var T=l(C,2);o(T,{label:"Cooldown",tooltip:"The time in seconds before the skill can be cast again (only works with the Cast trigger)",children:(v,q)=>{z(v,{get value(){return t().cooldown},set value(P){t(t().cooldown=P,!0)}})},$$slots:{default:!0}});var w=l(T,2);o(w,{label:"Cooldown Message",tooltip:"Whether to send a message when attempting to run the skill while in cooldown",children:(v,q)=>{M(v,{get data(){return t().cooldownMessage},set data(P){t(t().cooldownMessage=P,!0)}})},$$slots:{default:!0}});var y=l(w,2);o(y,{label:"Mana",tooltip:"The amount of mana it takes to cast the skill (only works with the Cast trigger)",children:(v,q)=>{z(v,{get value(){return t().mana},set value(P){t(t().mana=P,!0)}})},$$slots:{default:!0}});var N=l(y,2);o(N,{label:"Cast Message",tooltip:"The message to display to players around the caster when the skill is cast. The radius of the area is in the config.yml options",get value(){return t().castMessage},set value(v){t(t().castMessage=v,!0)}});var K=l(N,2);o(K,{label:"Combo",tooltip:'The click combo to assign the skill (if enabled). Use L, R, S, LS, RS, P, Q and F for the types of clicks separated by spaces. For example, "L L R R" would work for 4 click combos.',get value(){return t().combo},set value(v){t(t().combo=v,!0)}});var V=l(K,2);We(V,{get icon(){return t().icon},set icon(v){t(t().icon=v,!0)}});var Q=l(V,2);o(Q,{label:"Incompatible",tooltip:"List of skills that must not be upgraded in order to upgrade this skill",children:(v,q)=>{var P=U(()=>r().filter(j=>j!==t()));ee(v,{multiple:!0,get data(){return g(P)},get selected(){return t().incompatible},set selected(j){t(t().incompatible=j,!0)}})},$$slots:{default:!0}});var se=l(Q,4);o(se,{label:"Skill Requirement",tooltip:"The skill that needs to be upgraded before this one can be unlocked",children:(v,q)=>{var P=U(()=>r().filter(j=>j!==t()));ee(v,{id:"skillReq",get selected(){return t().skillReq},set selected(j){t(t().skillReq=j,!0)},get data(){return g(P)}})},$$slots:{default:!0}});var ve=l(se,2);o(ve,{label:"Skill Req Level",tooltip:"The level that the required skill needs to reach before this one can be unlocked",get value(){return t().skillReqLevel},set value(v){t(t().skillReqLevel=v,!0)}});var re=l(ve,2);o(re,{label:"Permission",get tooltip(){return`Whether this skill requires a permission to unlock. The permission would be "skillapi.skill.${t().name??""}"`},children:(v,q)=>{M(v,{get data(){return t().permission},set data(P){t(t().permission=P,!0)}})},$$slots:{default:!0}});var oe=l(re,2);o(oe,{label:"Level Req",tooltip:"The class level the player needs to be before unlocking or upgrading this skill",children:(v,q)=>{z(v,{get value(){return t().levelReq},set value(P){t(t().levelReq=P,!0)}})},$$slots:{default:!0}});var ne=l(oe,2);o(ne,{label:"Min Spent",tooltip:"The amount of skill points that need to be spent before upgrading this skill",children:(v,q)=>{z(v,{get value(){return t().minSpent},set value(P){t(t().minSpent=P,!0)}})},$$slots:{default:!0}});var he=l(ne,4);Pt(he,{get value(){return t().attributeRequirements},set value(v){t(t().attributeRequirements=v,!0)}}),k(i,h)}),k(c,n),B()}var wt=x('<div class="stat svelte-19i6c7i"><div class="btn-del svelte-19i6c7i"><!></div> <!> <!></div>');function Ct(c,s){F(s,!0);let a=H(s,"stat",15);var r=wt(),t=S(r),e=S(t);te(e,{title:"Delete stat",icon:"delete",color:"red",onclick:()=>s.component.removeStat(a()),onkeypress:()=>s.component.removeStat(a())}),$(t);var n=l(t,2);o(n,{label:"Option",tooltip:"Attribute option to modify based on attribute value",children:(i,h)=>{ee(i,{get selected(){return a().key},set selected(b){a(a().key=b,!0)},get data(){return s.component.availableStats},multiple:!1})},$$slots:{default:!0}});var u=l(n,2);xe(u,{get data(){return a().formula},set data(i){a(a().formula=i,!0)},name:"Formula",tooltip:"Formula to modify the option by"}),$(r),k(c,r),B()}var At=x('<div class="component svelte-k4qkgo"><div class="componentTitle svelte-k4qkgo"><!></div> <!> <div class="controls svelte-k4qkgo"><!> <!></div></div>');function Lt(c,s){F(s,!0);let a=H(s,"component",7);_e(()=>a().section.attribute.save());var r=At(),t=S(r),e=S(t);o(e,{label:"Component",tooltip:"The component to modify options to",children:(b,m)=>{ee(b,{get selected(){return a().name},set selected(_){a().name=_},get data(){return s.section.availableComponents},multiple:!1})},$$slots:{default:!0}}),$(t);var n=l(t,2);le(n,17,()=>a().stats,ce,(b,m)=>{Ct(b,{get stat(){return g(m)},get component(){return a()}})});var u=l(n,2),i=S(u);D(i,()=>a().availableStats.length>0,b=>{te(b,{title:"Add Stat",icon:"add",color:"gray",onclick:()=>a().addStat(a().availableStats[0]),onkeypress:()=>a().addStat(a().availableStats[0])})});var h=l(i,2);te(h,{title:"Delete Component",icon:"delete",color:"red",onclick:()=>s.section.removeComponent(a()),onkeypress:()=>s.section.removeComponent(a())}),$(u),$(r),E(()=>et(r,"--comp-color",s.color)),k(c,r),B()}var Wt=x('<div class="btn svelte-1y16mx6"><!></div>'),Rt=x('<div class="section svelte-1y16mx6"><div class="header svelte-1y16mx6"> </div> <!> <!></div>');function Pe(c,s){F(s,!0);let a=s.name==="Target"?"#04af38":s.name==="Condition"?"#feac00":"#ff3a3a";var r=Rt(),t=S(r),e=S(t);$(t);var n=l(t,2);le(n,17,()=>s.section.components,ce,(i,h)=>{Lt(i,{color:a,get component(){return g(h)},get section(){return s.section}})});var u=l(n,2);D(u,()=>s.section.availableComponents.length>0,i=>{var h=Wt(),b=S(h),m=U(()=>`Add ${s.name}`);te(b,{get title(){return g(m)},icon:"add",color:a,onclick:()=>s.section.addComponent(s.section.availableComponents[0]),onkeypress:()=>s.section.addComponent(s.section.availableComponents[0])}),$(h),k(i,h)}),$(r),E(()=>ae(e,`${s.name??""} modifiers`)),k(c,r),B()}var qt=x('<div class="stat svelte-yzok5e"><div class="btn-del svelte-yzok5e"><!></div> <!> <!></div>');function Mt(c,s){F(s,!0);let a=H(s,"stat",15);var r=qt(),t=S(r),e=S(t);te(e,{title:"Delete stat",icon:"delete",color:"red",onclick:()=>s.stats.removeStat(a()),onkeypress:()=>s.stats.removeStat(a())}),$(t);var n=l(t,2);xe(n,{get data(){return a().key},set data(i){a(a().key=i,!0)},name:"Stat",tooltip:"Attribute option to modify based on attribute value"});var u=l(n,2);xe(u,{get data(){return a().formula},set data(i){a(a().formula=i,!0)},name:"Formula",tooltip:"Formula to modify the option by"}),$(r),k(c,r),B()}var Dt=x('<div class="stats svelte-3opmim"><div class="header svelte-3opmim">Stat modifiers</div> <!> <div class="btn svelte-3opmim"><!></div></div>');function Ft(c,s){F(s,!0);let a=H(s,"stats",15);var r=Dt(),t=l(S(r),2);le(t,17,()=>a().stats,ce,(u,i)=>{Mt(u,{get stats(){return a()},set stats(h){a(h)},get stat(){return g(i)}})});var e=l(t,2),n=S(e);te(n,{color:"gray",icon:"add",onclick:()=>a().addStat(),onkeypress:()=>a().addStat(),title:"Add Stat"}),$(e),$(r),k(c,r),B()}var Bt=x("<!> <!> <!> <!> <!> <!> <!> <!> <!>",1);function Nt(c,s){F(s,!0);let a=H(s,"data",15);_e(()=>a().save());var r=de(),t=R(r);D(t,a,e=>{var n=Bt(),u=R(n);o(u,{label:"Name",tooltip:"The name of the attribute. This should not contain color codes",get value(){return a().name},set value(y){a(a().name=y,!0)}});var i=l(u,2);o(i,{label:"Display",tooltip:"The name of the attribute as it will be displayed in the game",get value(){return a().display},set value(y){a(a().display=y,!0)}});var h=l(i,2);o(h,{label:"Max",tooltip:"The maximum points of this attribute that a player can have",get value(){return a().max},set value(y){a(a().max=y,!0)}});var b=l(h,2);o(b,{label:"Cost",tooltip:"How many attribute points it costs to upgrade the attribute, increasing with the level of the attribute",children:(y,N)=>{z(y,{get value(){return a().cost}})},$$slots:{default:!0}});var m=l(b,2);We(m,{get icon(){return a().icon},set icon(y){a(a().icon=y,!0)}});var _=l(m,2);Pe(_,{name:"Target",get section(){return a().targets}});var C=l(_,2);Pe(C,{name:"Condition",get section(){return a().conditions}});var T=l(C,2);Pe(T,{name:"Mechanic",get section(){return a().mechanics}});var w=l(T,2);Ft(w,{get stats(){return a().stats}}),k(e,n)}),k(c,r),B()}var jt=x('<a class="material-symbols-rounded chip edit-skill svelte-191pm8d">auto_fix</a>'),zt=x('<h1 class="svelte-191pm8d"> <!></h1> <hr> <div class="container svelte-191pm8d"><!></div>',1);function Gt(c,s){F(s,!0);var a=zt();st(i=>{E(()=>rt.title=`Fabled Dynamic Editor - ${s.data.data.name??""}`)});var r=R(a),t=S(r),e=l(t);D(e,()=>{var i;return((i=s.data)==null?void 0:i.data)instanceof ze},i=>{var h=jt();E(()=>at(h,"href",`${lt??""}/skill/${s.data.data.name??""}`)),k(i,h)}),$(r);var n=l(r,4),u=S(n);D(u,()=>{var i;return((i=s.data)==null?void 0:i.data)instanceof tt},i=>{kt(i,{get data(){return s.data.data}})},i=>{var h=de(),b=R(h);D(b,()=>{var m;return((m=s.data)==null?void 0:m.data)instanceof ze},m=>{xt(m,{get data(){return s.data.data}})},m=>{var _=de(),C=R(_);D(C,()=>{var T;return((T=s.data)==null?void 0:T.data)instanceof Ie},T=>{Nt(T,{get data(){return s.data.data}})},null,!0),k(m,_)},!0),k(i,h)}),$(n),E(()=>{var i,h;return ae(t,`${((h=(i=s.data)==null?void 0:i.data)==null?void 0:h.name)??""} `)}),k(c,a),B()}export{Gt as component,Yt as universal};
