var I=Object.defineProperty;var T=(c,a,t)=>a in c?I(c,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):c[a]=t;var o=(c,a,t)=>T(c,typeof a!="symbol"?a+"":a,t);import{F as y,R as w,P as _,c as $,s as G,t as C,f as H,d as J}from"./class-store.pbq76w2p.js";import{c as L,e as Q,a as E,t as U}from"./disclose-version.B9aixzAF.js";import{o as k,at as K,k as O,au as j,w as D,q as V,av as W,x as v,y as g,v as X}from"./runtime.LqzrUpiV.js";import{i as b}from"./lifecycle.CXak-Nyl.js";import{p as d,c as z,i as Y}from"./index-client.no01Ekxd.js";import{S as Z,T as tt,c as et,a as st,d as at}from"./Toggle.C8JTk9bz.js";import{w as M}from"./entry.j2XGvQNg.js";class pt extends y{constructor(t,e=!1,s=!1){super("mechanic",t,s);o(this,"iconKey","");o(this,"countsAsCast",!0);this.isParent=e}getData(t=!1){const e={};return e["icon-key"]=this.iconKey,e.counts=this.countsAsCast,this.data.filter(s=>t||s.meetsRequirements(this)).forEach(s=>{const n=s.getData();Object.keys(n).forEach(i=>e[i]=n[i])}),e}deserialize(t){super.deserialize(t);const e=t.data;e&&this.data.forEach(s=>s.deserialize(e)),this.iconKey=e["icon-key"],this.countsAsCast=e.counts===void 0?!0:e.counts,t.children&&Object.keys(t.children).length>0&&this.setComponents(w.deserializeComponents(t.children))}}const p=class p extends y{constructor(t,e=!1){super("condition",t,e);o(this,"iconKey","")}getData(t=!1){const e={};return e["icon-key"]=this.iconKey,this.data.filter(s=>t||s.meetsRequirements(this)).forEach(s=>{const n=s.getData();Object.keys(n).forEach(i=>e[i]=n[i])}),e}deserialize(t){super.deserialize(t);const e=t.data;this.iconKey=e["icon-key"],e&&this.data.forEach(s=>s.deserialize(e)),t.children&&Object.keys(t.children).length>0&&this.setComponents(w.deserializeComponents(t.children))}};o(p,"new",()=>new p({name:"null"}));let q=p;function it(c,a){k(a,!1);let t=d(a,"data",12),e=d(a,"name",8,""),s=d(a,"tooltip",8,void 0);const n=z();K(()=>O(t()),()=>{t()&&n("save")}),j(),b(),_(c,{get label(){return e()},get tooltip(){return s()},children:(i,u)=>{Z(i,{get selected(){return t().selected},set selected(l){t(t().selected=l,!0)},get data(){return t().value},set data(l){t(t().value=l,!0)},get multiple(){return t().multiple},set multiple(l){t(t().multiple=l,!0)},$$legacy:!0})},$$slots:{default:!0}}),D()}class P extends ${constructor(t,e,s,n,i=!1){super();o(this,"component",it);o(this,"dataSource");o(this,"data",{selected:"",value:[],multiple:!1});o(this,"name","");o(this,"key","");o(this,"tooltip");o(this,"init",()=>{this.dataSource&&(this.data.value=this.dataSource()),!this.data.selected&&this.data.value.length>0&&!this.data.multiple&&(this.data.selected=this.data.value[0])});o(this,"setTooltip",t=>(this.tooltip=t,this));o(this,"clone",()=>new P(this.name,this.key,this.dataSource||[...this.data.value],this.data.multiple?[...this.data.selected]:this.data.selected,this.data.multiple));o(this,"getData",()=>{const t={};return t[this.key]=this.data.selected,t});o(this,"getSummary",()=>this.data.selected instanceof Array?this.data.selected.join(", "):this.data.selected);o(this,"deserialize",t=>{this.data.selected=t[this.key],this.data.multiple&&!(this.data.selected instanceof Array)?this.data.selected=[this.data.selected]:!this.data.multiple&&this.data.selected instanceof Array&&(this.data.selected=this.data.selected[0])});this.name=t,this.key=e,typeof s=="function"?this.dataSource=s:this.data.value=s,i&&(this.data.selected=[]),n&&(this.data.selected=n),this.data.multiple=i}}const m=class m extends y{constructor(t,e=!1){super("target",t,e);o(this,"iconKey","")}getData(t=!1){const e={};return e["icon-key"]=this.iconKey,this.data.filter(s=>t||s.meetsRequirements(this)).forEach(s=>{const n=s.getData();Object.keys(n).forEach(i=>e[i]=n[i])}),e}deserialize(t){super.deserialize(t);const e=t.data;this.iconKey=e["icon-key"],e&&this.data.forEach(s=>s.deserialize(e)),t.children&&Object.keys(t.children).length>0&&this.setComponents(w.deserializeComponents(t.children))}};o(m,"new",()=>new m({name:"null"}));let x=m;function mt(c,a){k(a,!1);let t=d(a,"data",12),e=d(a,"name",8,""),s=d(a,"tooltip",8,void 0);const n=z();K(()=>O(t()),()=>{(t()||!t())&&n("save")}),j(),b(),_(c,{get label(){return e()},get tooltip(){return s()},children:(i,u)=>{tt(i,{get data(){return t()},set data(l){t(l)},$$legacy:!0})},$$slots:{default:!0}}),D()}var nt=U('<div class="backdrop svelte-sv0lqh"><div class="modal-content svelte-sv0lqh"><div class="wrapper svelte-sv0lqh"><!></div></div></div>');function vt(c,a){k(a,!1);let t=d(a,"width",8,"auto"),e=d(a,"open",12,!1);const s=z(),n=r=>{e(!1),s("close"),r==null||r.stopPropagation()},i=r=>{r.key=="Escape"&&(r.preventDefault(),r.stopPropagation(),n())};b();var u=L();Q("keyup",W,i);var l=V(u);Y(l,e,r=>{var f=nt(),h=v(f),S=v(h),B=v(S);G(B,a,"default",{}),g(S),g(h),g(f),X(()=>st(h,"--width",t())),et(h,(F,N)=>at(F,N),()=>n),C(3,h,()=>H,()=>({y:-200})),C(3,f,()=>J),E(r,f)}),E(c,u),D()}const gt=(c,{delay:a=0,duration:t=500}={})=>{const s=getComputedStyle(c).width.match(/([\d.]+)(.*)/);if(!s)return{delay:a,duration:t,css:i=>`max-width: unset; width: ${i*100}%;`};const n=Number.parseFloat(s[1]);return{delay:a,duration:t,css:i=>`max-width: unset; width: ${i*n}${s[2]}; min-width: unset;`}},yt=(c,{delay:a=0,duration:t=500})=>{const s=getComputedStyle(c).height.match(/([\d.]+)(.*)/);if(!s)return{delay:a,duration:t,css:i=>`max-height: unset; height: ${i*100}%;`};const n=Number.parseFloat(s[1]);return{delay:a,duration:t,css:i=>`max-height: unset; height: ${i*n}${s[2]}; min-height: unset;`}},A=M(void 0),R=M(void 0),wt=(c,a)=>{A.set(c),a&&R.set(a)},kt=()=>{A.set(void 0),R.set(void 0)};export{mt as B,P as D,x as F,vt as M,q as a,pt as b,kt as c,gt as d,A as e,R as m,wt as o,yt as s};
